apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

patches:
- target:
    kind: Keycloak
  patch: |
    - op: add
      path: /spec/unsupported
      value:
        podTemplate:
          spec:
            containers:
              - name: keycloak
                securityContext:
                  allowPrivilegeEscalation: false
                  capabilities:
                    drop:
                      - ALL
                  privileged: false
                  runAsNonRoot: true
                  runAsGroup: 1000
                  runAsUser: 1000
                  seccompProfile:
                    type: RuntimeDefault

