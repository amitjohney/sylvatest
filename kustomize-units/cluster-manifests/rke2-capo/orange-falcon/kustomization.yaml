apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../base
components:
- ../../components/proxies/RKE2ControlPlane
patches:
- patch: |-
    apiVersion: infrastructure.cluster.x-k8s.io/v1alpha5
    kind: OpenStackCluster
    metadata:
      name: ${CLUSTER_NAME}
      namespace: default
    spec:
      dnsNameservers:
      - 172.20.115.54
- patch: |-
    apiVersion: infrastructure.cluster.x-k8s.io/v1alpha5
    kind: OpenStackMachineTemplate
    metadata:
      name: ${CLUSTER_NAME}-control-plane
      namespace: default
    spec:
      template:
        spec:
          rootVolume:
            diskSize: 80
            volumeType: ceph_sas
