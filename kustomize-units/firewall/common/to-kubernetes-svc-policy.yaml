apiVersion: crd.projectcalico.org/v1
kind: GlobalNetworkPolicy
metadata:
  name: to-kubernetes-policy
spec:
  selector: component == 'kube-apiserver'
  order: 50
  types:
    - Ingress
  ingress:
  - action: Allow
    protocol: TCP
    source:
      selector: has(node.kubernetes.io/instance-type)
    destination:
      ports:
      - 443 # kube-apiserver
      - 666
