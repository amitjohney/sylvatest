apiVersion: v1
kind: Secret
metadata:
  name: git-repo-auth-fleet-deployments
  namespace: default
type: kubernetes.io/basic-auth
stringData:
  username: ${username}
  password: ${password}
---
kind: GitRepo
apiVersion: fleet.cattle.io/v1alpha1
metadata:
  name: monitoring
  namespace: default
spec:
  repo: ${GIT_REPO}
  branch: ${BRANCH}
  clientSecretName: git-repo-auth-fleet-deployments
  paths:
  - monitoring-crd/
  - monitoring/
  targets:
  - name: monitoring
    clusterSelector:
      matchLabels:
        rancher-monitoring: enabled
