<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
{"$schema": "https://json-schema.org/draft/2020-12/schema#", "title": "Schema for telco-cloud-init chart values", "description": "---------------------------------------------------------------------- DO NOT EDIT THIS FILE AS JSON, THE YAML VERSION IS THE SOURCE OF TRUTH ----------------------------------------------------------------------", "$defs": {"gotpl": {"type": "string", "pattern": "^{{ .* }}$"}, "username-password": {"anyOf": [{"type": "object", "additionalProperties": false, "patternProperties": {"^(username|password)$": {"type": "string"}}}, {"$ref": "#/$defs/gotpl"}]}, "enabled": {"anyOf": [{"enum": [true, false, "yes", "no", "management-only"]}, {"$ref": "#/$defs/gotpl"}]}}, "additionalProperties": false, "required": ["phase", "registry_secret", "git_auth_default", "git_repo_spec_default", "git_repo_templates", "helm_repo_spec_default", "component_kustomization_spec_default", "component_helmrelease_spec_default", "component_helmrelease_kustomization_spec_default", "components", "cluster", "proxies", "component_default_enable", "env_type_ci"], "properties": {"fullnameOverride": {"type": "string"}, "nameOverride": {"type": "string"}, "registry_secret": {"type": "object", "patternProperties": {"^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {"anyOf": [{"type": "string", "pattern": "{{ .* }}"}, {"$ref": "#/$defs/username-password"}]}}}, "git_auth_default": {"$ref": "#/$defs/username-password"}, "git_repo_spec_default": {"type": "object"}, "git_repo_templates": {"type": "object", "additionalProperties": false, "patternProperties": {"^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {"type": "object", "additionalProperties": false, "anyOf": [{"required": ["spec"]}, {"required": ["existing_gitrepository"]}], "properties": {"existing_gitrepository": {"type": "string"}, "auth": {"$ref": "#/$defs/username-password"}, "spec": {"type": "object", "required": ["url", "ref"], "properties": {"url": {"type": "string", "format": "uri"}, "ref": {"type": "object", "additionalProperties": false, "anyOf": [{"required": ["branch"]}, {"required": ["tag"]}, {"required": ["commit"]}], "patternProperties": {"(branch|tag|commit)": {"type": "string"}}}}, "not": {"required": ["secretRef"]}}}}}}, "helm_repo_spec_default": {"type": "object"}, "component_kustomization_spec_default": {"type": "object"}, "component_helmrelease_spec_default": {"type": "object"}, "component_helmrelease_kustomization_spec_default": {"type": "object"}, "components": {"type": "object", "patternProperties": {"^[a-z0-9][a-z0-9-]*[a-z0-9]$": {"type": "object", "additionalProperties": false, "properties": {"enabled": {"$ref": "#/$defs/enabled"}, "repo": {"type": "string"}, "labels": {"type": "object", "patternProperties": {".*": {"type": "string"}}}, "depends_on": {"type": "array", "items": {"anyOf": [{"type": "object", "additionalProperties": false, "required": ["name"], "properties": {"name": {"type": "string", "pattern": "^([a-z0-9][a-z0-9-]*[a-z0-9]|{{ .* }})$"}}}, {"$ref": "#/$defs/gotpl"}]}}, "ref_override": {"type": "string"}, "kustomization_spec": {"type": "object", "properties": {"path": {"type": "string"}}, "allOf": [{"not": {"required": ["dependsOn"]}}, {"not": {"required": ["wait", "healthChecks"]}}, {"not": {"required": ["sourceRef"]}}]}, "helmrelease_spec": {"type": "object", "required": ["chart"], "properties": {"chart": {"type": "object", "required": ["spec"], "properties": {"spec": {"type": "object", "required": ["chart"], "properties": {"chart": {"type": "string"}}}}}}, "not": {"required": ["dependsOn"]}}, "helm_repo_url": {"type": "string", "pattern": "https?://.*"}, "helm_secret_values": {"type": "object"}, "kustomization_substitute_secrets": {"type": "object", "additionalProperties": false, "patternProperties": {"^.*$": {"type": "string"}}}}, "dependentRequired": {"kustomization_substitute_secrets": ["kustomization_spec"], "helm_secret_values": ["helmrelease_spec"], "helm_repo_url": ["helmrelease_spec"]}, "anyOf": [{"required": ["helmrelease_spec"]}, {"required": ["kustomization_spec"]}, {"properties": {"enabled": {"const": false}}}], "allOf": [{"not": {"required": ["repo", "helm_repo_url"]}}, {"if": {"not": {"required": ["helmrelease_spec"]}}, "then": {"properties": {"kustomization_spec": {"required": ["path"]}}}}, {"if": {"required": ["helmrelease_spec"]}, "then": {"properties": {"kustomization_spec": {"not": {"required": ["path"]}}}}}]}}}, "cluster": {"type": "object", "additionalProperties": false, "required": ["flavor", "image"], "properties": {"name": {"type": "string"}, "admin_password": {"type": "string"}, "image": {"type": "string"}, "flavor": {"type": "object", "additionalProperties": false, "properties": {"infra_provider": {"enum": ["capd", "capo", "capv", "capm3"]}, "bootstrap_provider": {"enum": ["cabpk", "cabpr"]}}}, "cluster_external_ip": {"type": "string", "format": "ip"}, "cis_benchmark_scan_profile": {"type": "string"}, "flux_webui": {"type": "object", "additionalProperties": false, "properties": {"admin_user": {"type": "string"}, "admin_password": {"type": "string"}}}, "rancher": {"type": "object", "additionalProperties": false, "properties": {"external_hostname": {"type": "string", "format": "hostname"}}}, "vault": {"type": "object", "additionalProperties": false, "properties": {"external_hostname": {"type": "string", "format": "hostname"}}}, "capd": {"type": "object", "additionalProperties": false, "properties": {"docker_host": {"type": "string", "format": "uri", "pattern": "^(unix|tcp)://.*"}}}, "metal3": {"type": "object", "properties": {"ironic_ip": {"type": "string", "format": "ip"}}}, "capo": {"type": "object"}, "test_workload_cluster_name": {"type": "string", "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$"}}, "allOf": [{"if": {"properties": {"flavor": {"properties": {"infra_provider": {"const": "capo"}}}}}, "then": {"properties": {"capo": {"type": "object", "additionalProperties": false, "properties": {"ssh_key_name": {"type": "string"}, "network_id": {"type": "string"}, "clouds_yaml": {"type": "object", "additionalProperties": false, "properties": {"clouds": {"type": "object", "additionalProperties": false, "required": ["capo_cloud"], "patternProperties": {"(capo_cloud|.*)": {"type": "object", "additionalProperties": true, "required": ["auth"], "properties": {"auth": {"type": "object", "additionalProperties": true, "required": ["auth_url", "username", "password", "project_name", "project_domain_name", "user_domain_name"], "properties": {"auth_url": {"type": "string", "format": "uri"}, "user_domain_name": {"type": "string"}, "project_domain_name": {"type": "string"}, "project_name": {"type": "string"}, "username": {"type": "string"}, "password": {"type": "string"}, "region": {"anyOf": [{"type": "string"}, {"type": "null"}]}}}, "verify": {"type": "boolean"}}}}}}}, "cacert": {"type": "string"}, "storageClass": {"type": "object", "additionalProperties": false, "properties": {"name": {"type": "string"}, "type": {"type": "string"}}}}}}}}]}, "proxies": {"type": "object", "additionalProperties": false, "patternProperties": {"https?_proxy": {"type": "string", "pattern": "^(https?://.*|)$"}, "no_proxy": {"type": "string"}}, "required": ["http_proxy", "https_proxy", "no_proxy"]}, "phase": {"type": "string", "enum": ["management", "bootstrap"]}, "component_default_enable": {"$ref": "#/$defs/enabled"}, "test_all_components_enabled": {"anyOf": [{"type": "boolean"}, {"type": "null"}]}, "env_type_ci": {"type": "boolean"}, "dockerio_registry_mirror": {"type": "string", "anyOf": [{"format": "uri"}, {"const": ""}]}}}
=======
{"$schema": "https://json-schema.org/draft/2020-12/schema#", "title": "Schema for sylva-units chart values", "description": "---------------------------------------------------------------------- DO NOT EDIT THIS FILE AS JSON, THE YAML VERSION IS THE SOURCE OF TRUTH ----------------------------------------------------------------------", "$defs": {"gotpl": {"type": "string", "pattern": "^{{ .* }}$"}, "username-password": {"anyOf": [{"type": "object", "additionalProperties": false, "patternProperties": {"^(username|password)$": {"type": "string"}}}, {"$ref": "#/$defs/gotpl"}]}, "enabled": {"anyOf": [{"enum": [true, false, "yes", "no", "management-only"]}, {"$ref": "#/$defs/gotpl"}]}}, "additionalProperties": false, "required": ["phase", "registry_secret", "git_auth_default", "git_repo_spec_default", "git_repo_templates", "helm_repo_spec_default", "component_kustomization_spec_default", "component_helmrelease_spec_default", "component_helmrelease_kustomization_spec_default", "components", "cluster", "proxies", "component_default_enable", "env_type_ci"], "properties": {"fullnameOverride": {"type": "string"}, "nameOverride": {"type": "string"}, "registry_secret": {"type": "object", "patternProperties": {"^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {"anyOf": [{"type": "string", "pattern": "{{ .* }}"}, {"$ref": "#/$defs/username-password"}]}}}, "git_auth_default": {"$ref": "#/$defs/username-password"}, "git_repo_spec_default": {"type": "object"}, "git_repo_templates": {"type": "object", "additionalProperties": false, "patternProperties": {"^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {"type": "object", "additionalProperties": false, "anyOf": [{"required": ["spec"]}, {"required": ["existing_gitrepository"]}], "properties": {"existing_gitrepository": {"type": "string"}, "auth": {"$ref": "#/$defs/username-password"}, "spec": {"type": "object", "required": ["url", "ref"], "properties": {"url": {"type": "string", "format": "uri"}, "ref": {"type": "object", "additionalProperties": false, "anyOf": [{"required": ["branch"]}, {"required": ["tag"]}, {"required": ["commit"]}], "patternProperties": {"(branch|tag|commit)": {"type": "string"}}}}, "not": {"required": ["secretRef"]}}}}}}, "helm_repo_spec_default": {"type": "object"}, "component_kustomization_spec_default": {"type": "object"}, "component_helmrelease_spec_default": {"type": "object"}, "component_helmrelease_kustomization_spec_default": {"type": "object"}, "components": {"type": "object", "patternProperties": {"^[a-z0-9][a-z0-9-]*[a-z0-9]$": {"type": "object", "additionalProperties": false, "properties": {"enabled": {"$ref": "#/$defs/enabled"}, "repo": {"type": "string"}, "labels": {"type": "object", "patternProperties": {".*": {"type": "string"}}}, "depends_on": {"type": "array", "items": {"anyOf": [{"type": "object", "additionalProperties": false, "required": ["name"], "properties": {"name": {"type": "string", "pattern": "^([a-z0-9][a-z0-9-]*[a-z0-9]|{{ .* }})$"}}}, {"$ref": "#/$defs/gotpl"}]}}, "ref_override": {"type": "string"}, "kustomization_spec": {"type": "object", "properties": {"path": {"type": "string"}}, "allOf": [{"not": {"required": ["dependsOn"]}}, {"not": {"required": ["wait", "healthChecks"]}}, {"not": {"required": ["sourceRef"]}}]}, "helmrelease_spec": {"type": "object", "required": ["chart"], "properties": {"chart": {"type": "object", "required": ["spec"], "properties": {"spec": {"type": "object", "required": ["chart"], "properties": {"chart": {"type": "string"}}}}}}, "not": {"required": ["dependsOn"]}}, "helm_repo_url": {"type": "string", "pattern": "https?://.*"}, "helm_secret_values": {"type": "object"}, "kustomization_substitute_secrets": {"type": "object", "additionalProperties": false, "patternProperties": {"^.*$": {"type": "string"}}}}, "dependentRequired": {"kustomization_substitute_secrets": ["kustomization_spec"], "helm_secret_values": ["helmrelease_spec"], "helm_repo_url": ["helmrelease_spec"]}, "anyOf": [{"required": ["helmrelease_spec"]}, {"required": ["kustomization_spec"]}, {"properties": {"enabled": {"const": false}}}], "allOf": [{"not": {"required": ["repo", "helm_repo_url"]}}, {"if": {"not": {"required": ["helmrelease_spec"]}}, "then": {"properties": {"kustomization_spec": {"required": ["path"]}}}}, {"if": {"required": ["helmrelease_spec"]}, "then": {"properties": {"kustomization_spec": {"not": {"required": ["path"]}}}}}]}}}, "cluster": {"type": "object", "additionalProperties": false, "required": ["flavor", "image"], "properties": {"name": {"type": "string"}, "admin_password": {"type": "string"}, "image": {"type": "string"}, "flavor": {"type": "object", "additionalProperties": false, "properties": {"infra_provider": {"enum": ["capd", "capo", "capv", "capm3"]}, "bootstrap_provider": {"enum": ["cabpk", "cabpr"]}}}, "cluster_external_ip": {"type": "string", "format": "ip"}, "cis_benchmark_scan_profile": {"type": "string"}, "flux_webui": {"type": "object", "additionalProperties": false, "properties": {"admin_user": {"type": "string"}, "admin_password": {"type": "string"}}}, "rancher": {"type": "object", "additionalProperties": false, "properties": {"external_hostname": {"type": "string", "format": "hostname"}}}, "vault": {"type": "object", "additionalProperties": false, "properties": {"external_hostname": {"type": "string", "format": "hostname"}}}, "capd": {"type": "object", "additionalProperties": false, "properties": {"docker_host": {"type": "string", "format": "uri", "pattern": "^(unix|tcp)://.*"}}}, "metal3": {"type": "object", "properties": {"ironic_ip": {"type": "string", "format": "ip"}}}, "capo": {"type": "object"}, "test_workload_cluster_name": {"type": "string", "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$"}}, "allOf": [{"if": {"properties": {"flavor": {"properties": {"infra_provider": {"const": "capo"}}}}}, "then": {"properties": {"capo": {"type": "object", "additionalProperties": false, "properties": {"ssh_key_name": {"type": "string"}, "network_id": {"type": "string"}, "clouds_yaml": {"type": "object", "additionalProperties": false, "properties": {"clouds": {"type": "object", "additionalProperties": false, "required": ["capo_cloud"], "patternProperties": {"(capo_cloud|.*)": {"type": "object", "additionalProperties": true, "required": ["auth"], "properties": {"auth": {"type": "object", "additionalProperties": true, "required": ["auth_url", "username", "password", "project_name", "project_domain_name", "user_domain_name"], "properties": {"auth_url": {"type": "string", "format": "uri"}, "user_domain_name": {"type": "string"}, "project_domain_name": {"type": "string"}, "project_name": {"type": "string"}, "username": {"type": "string"}, "password": {"type": "string"}, "region": {"anyOf": [{"type": "string"}, {"type": "null"}]}}}, "verify": {"type": "boolean"}}}}}}}, "cacert": {"type": "string"}, "storageClass": {"type": "object", "additionalProperties": false, "properties": {"name": {"type": "string"}, "type": {"type": "string"}}}}}}}}]}, "proxies": {"type": "object", "additionalProperties": false, "patternProperties": {"https?_proxy": {"type": "string", "pattern": "^(https?://.*|)$"}, "no_proxy": {"type": "string"}}, "required": ["http_proxy", "https_proxy", "no_proxy"]}, "phase": {"type": "string", "enum": ["management", "bootstrap"]}, "component_default_enable": {"$ref": "#/$defs/enabled"}, "test_all_components_enabled": {"anyOf": [{"type": "boolean"}, {"type": "null"}]}, "env_type_ci": {"type": "boolean"}, "dockerio_registry_mirror": {"type": "string", "anyOf": [{"format": "uri"}, {"const": ""}]}}}
>>>>>>> 80eadf5 (JSONSchema did not follow the rename)
=======
{"$schema": "https://json-schema.org/draft/2020-12/schema#", "title": "Schema for sylva-units chart values", "description": "---------------------------------------------------------------------- DO NOT EDIT THIS FILE AS JSON, THE YAML VERSION IS THE SOURCE OF TRUTH ----------------------------------------------------------------------", "$defs": {"gotpl": {"type": "string", "pattern": "^{{ .* }}$"}, "username-password": {"anyOf": [{"type": "object", "additionalProperties": false, "patternProperties": {"^(username|password)$": {"type": "string"}}}, {"$ref": "#/$defs/gotpl"}]}, "enabled": {"anyOf": [{"enum": [true, false, "yes", "no", "management-only"]}, {"$ref": "#/$defs/gotpl"}]}}, "additionalProperties": false, "required": ["phase", "registry_secret", "git_auth_default", "git_repo_spec_default", "git_repo_templates", "helm_repo_spec_default", "component_kustomization_spec_default", "component_helmrelease_spec_default", "component_helmrelease_kustomization_spec_default", "components", "cluster", "proxies", "component_default_enable", "env_type_ci"], "properties": {"fullnameOverride": {"type": "string"}, "nameOverride": {"type": "string"}, "registry_secret": {"type": "object", "patternProperties": {"^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {"anyOf": [{"type": "string", "pattern": "{{ .* }}"}, {"$ref": "#/$defs/username-password"}]}}}, "git_auth_default": {"$ref": "#/$defs/username-password"}, "git_repo_spec_default": {"type": "object"}, "git_repo_templates": {"type": "object", "additionalProperties": false, "patternProperties": {"^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {"type": "object", "additionalProperties": false, "anyOf": [{"required": ["spec"]}, {"required": ["existing_gitrepository"]}], "properties": {"existing_gitrepository": {"type": "string"}, "auth": {"$ref": "#/$defs/username-password"}, "spec": {"type": "object", "required": ["url", "ref"], "properties": {"url": {"type": "string", "format": "uri"}, "ref": {"type": "object", "additionalProperties": false, "anyOf": [{"required": ["branch"]}, {"required": ["tag"]}, {"required": ["commit"]}], "patternProperties": {"(branch|tag|commit)": {"type": "string"}}}}, "not": {"required": ["secretRef"]}}}}}}, "helm_repo_spec_default": {"type": "object"}, "component_kustomization_spec_default": {"type": "object"}, "component_helmrelease_spec_default": {"type": "object"}, "component_helmrelease_kustomization_spec_default": {"type": "object"}, "components": {"type": "object", "patternProperties": {"^[a-z0-9][a-z0-9-]*[a-z0-9]$": {"type": "object", "additionalProperties": false, "properties": {"enabled": {"$ref": "#/$defs/enabled"}, "repo": {"type": "string"}, "labels": {"type": "object", "patternProperties": {".*": {"type": "string"}}}, "depends_on": {"type": "array", "items": {"anyOf": [{"type": "object", "additionalProperties": false, "required": ["name"], "properties": {"name": {"type": "string", "pattern": "^([a-z0-9][a-z0-9-]*[a-z0-9]|{{ .* }})$"}}}, {"$ref": "#/$defs/gotpl"}]}}, "ref_override": {"type": "string"}, "kustomization_spec": {"type": "object", "properties": {"path": {"type": "string"}}, "allOf": [{"not": {"required": ["dependsOn"]}}, {"not": {"required": ["wait", "healthChecks"]}}, {"not": {"required": ["sourceRef"]}}]}, "helmrelease_spec": {"type": "object", "required": ["chart"], "properties": {"chart": {"type": "object", "required": ["spec"], "properties": {"spec": {"type": "object", "required": ["chart"], "properties": {"chart": {"type": "string"}}}}}}, "not": {"required": ["dependsOn"]}}, "helm_repo_url": {"type": "string", "pattern": "https?://.*"}, "helm_secret_values": {"type": "object"}, "kustomization_substitute_secrets": {"type": "object", "additionalProperties": false, "patternProperties": {"^.*$": {"type": "string"}}}}, "dependentRequired": {"kustomization_substitute_secrets": ["kustomization_spec"], "helm_secret_values": ["helmrelease_spec"], "helm_repo_url": ["helmrelease_spec"]}, "anyOf": [{"required": ["helmrelease_spec"]}, {"required": ["kustomization_spec"]}, {"properties": {"enabled": {"const": false}}}], "allOf": [{"not": {"required": ["repo", "helm_repo_url"]}}, {"if": {"not": {"required": ["helmrelease_spec"]}}, "then": {"properties": {"kustomization_spec": {"required": ["path"]}}}}, {"if": {"required": ["helmrelease_spec"]}, "then": {"properties": {"kustomization_spec": {"not": {"required": ["path"]}}}}}]}}}, "cluster": {"type": "object", "additionalProperties": false, "required": ["flavor", "image"], "properties": {"name": {"type": "string"}, "admin_password": {"type": "string"}, "image": {"type": "string"}, "flavor": {"type": "object", "additionalProperties": false, "properties": {"infra_provider": {"enum": ["capd", "capo", "capv", "capm3"]}, "bootstrap_provider": {"enum": ["cabpk", "cabpr"]}}}, "cluster_external_ip": {"type": "string", "format": "ip"}, "cis_benchmark_scan_profile": {"type": "string"}, "flux_webui": {"type": "object", "additionalProperties": false, "properties": {"admin_user": {"type": "string"}, "admin_password": {"type": "string"}}}, "rancher": {"type": "object", "additionalProperties": false, "properties": {"external_hostname": {"type": "string", "format": "hostname"}}}, "vault": {"type": "object", "additionalProperties": false, "properties": {"external_hostname": {"type": "string", "format": "hostname"}}}, "capd": {"type": "object", "additionalProperties": false, "properties": {"docker_host": {"type": "string", "format": "uri", "pattern": "^(unix|tcp)://.*"}}}, "metal3": {"type": "object", "properties": {"ironic_ip": {"type": "string", "format": "ip"}}}, "capo": {"type": "object"}, "test_workload_cluster_name": {"type": "string", "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$"}}, "allOf": [{"if": {"properties": {"flavor": {"properties": {"infra_provider": {"const": "capo"}}}}}, "then": {"properties": {"capo": {"type": "object", "additionalProperties": false, "properties": {"flavor_name": {"type": "string"}, "ssh_key_name": {"type": "string"}, "network_id": {"type": "string"}, "clouds_yaml": {"type": "object", "additionalProperties": false, "properties": {"clouds": {"type": "object", "additionalProperties": false, "required": ["capo_cloud"], "patternProperties": {"(capo_cloud|.*)": {"type": "object", "additionalProperties": true, "required": ["auth"], "properties": {"auth": {"type": "object", "additionalProperties": true, "required": ["auth_url", "username", "password", "project_name", "project_domain_name", "user_domain_name"], "properties": {"auth_url": {"type": "string", "format": "uri"}, "user_domain_name": {"type": "string"}, "project_domain_name": {"type": "string"}, "project_name": {"type": "string"}, "username": {"type": "string"}, "password": {"type": "string"}, "region": {"anyOf": [{"type": "string"}, {"type": "null"}]}}}, "verify": {"type": "boolean"}}}}}}}, "cacert": {"type": "string"}, "storageClass": {"type": "object", "additionalProperties": false, "properties": {"name": {"type": "string"}, "type": {"type": "string"}}}}}}}}]}, "proxies": {"type": "object", "additionalProperties": false, "patternProperties": {"https?_proxy": {"type": "string", "pattern": "^(https?://.*|)$"}, "no_proxy": {"type": "string"}}, "required": ["http_proxy", "https_proxy", "no_proxy"]}, "phase": {"type": "string", "enum": ["management", "bootstrap"]}, "component_default_enable": {"$ref": "#/$defs/enabled"}, "test_all_components_enabled": {"anyOf": [{"type": "boolean"}, {"type": "null"}]}, "env_type_ci": {"type": "boolean"}, "dockerio_registry_mirror": {"type": "string", "anyOf": [{"format": "uri"}, {"const": ""}]}}}
>>>>>>> ce5125c (allow specifying the OpenStack nova flavor from sylva-units values)
=======
{"$schema": "https://json-schema.org/draft/2020-12/schema#", "title": "Schema for sylva-units chart values", "description": "---------------------------------------------------------------------- DO NOT EDIT THIS FILE AS JSON, THE YAML VERSION IS THE SOURCE OF TRUTH ----------------------------------------------------------------------", "$defs": {"gotpl": {"type": "string", "pattern": "^{{ .* }}$"}, "username-password": {"anyOf": [{"type": "object", "additionalProperties": false, "patternProperties": {"^(username|password)$": {"type": "string"}}}, {"$ref": "#/$defs/gotpl"}]}, "enabled": {"anyOf": [{"enum": [true, false, "yes", "no", "management-only"]}, {"$ref": "#/$defs/gotpl"}]}}, "additionalProperties": false, "required": ["phase", "registry_secret", "git_auth_default", "git_repo_spec_default", "git_repo_templates", "helm_repo_spec_default", "component_kustomization_spec_default", "component_helmrelease_spec_default", "component_helmrelease_kustomization_spec_default", "components", "cluster", "proxies", "component_default_enable", "env_type_ci"], "properties": {"fullnameOverride": {"type": "string"}, "nameOverride": {"type": "string"}, "registry_secret": {"type": "object", "patternProperties": {"^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {"anyOf": [{"type": "string", "pattern": "{{ .* }}"}, {"$ref": "#/$defs/username-password"}]}}}, "git_auth_default": {"$ref": "#/$defs/username-password"}, "git_repo_spec_default": {"type": "object"}, "git_repo_templates": {"type": "object", "additionalProperties": false, "patternProperties": {"^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {"type": "object", "additionalProperties": false, "anyOf": [{"required": ["spec"]}, {"required": ["existing_gitrepository"]}], "properties": {"existing_gitrepository": {"type": "string"}, "auth": {"$ref": "#/$defs/username-password"}, "spec": {"type": "object", "required": ["url", "ref"], "properties": {"url": {"type": "string", "format": "uri"}, "ref": {"type": "object", "additionalProperties": false, "anyOf": [{"required": ["branch"]}, {"required": ["tag"]}, {"required": ["commit"]}], "patternProperties": {"(branch|tag|commit)": {"type": "string"}}}}, "not": {"required": ["secretRef"]}}}}}}, "helm_repo_spec_default": {"type": "object"}, "component_kustomization_spec_default": {"type": "object"}, "component_helmrelease_spec_default": {"type": "object"}, "component_helmrelease_kustomization_spec_default": {"type": "object"}, "components": {"type": "object", "patternProperties": {"^[a-z0-9][a-z0-9-]*[a-z0-9]$": {"type": "object", "additionalProperties": false, "properties": {"enabled": {"$ref": "#/$defs/enabled"}, "repo": {"type": "string"}, "labels": {"type": "object", "patternProperties": {".*": {"type": "string"}}}, "depends_on": {"type": "array", "items": {"anyOf": [{"type": "object", "additionalProperties": false, "required": ["name"], "properties": {"name": {"type": "string", "pattern": "^([a-z0-9][a-z0-9-]*[a-z0-9]|{{ .* }})$"}}}, {"$ref": "#/$defs/gotpl"}]}}, "ref_override": {"type": "string"}, "kustomization_spec": {"type": "object", "properties": {"path": {"type": "string"}}, "allOf": [{"not": {"required": ["dependsOn"]}}, {"not": {"required": ["wait", "healthChecks"]}}, {"not": {"required": ["sourceRef"]}}]}, "helmrelease_spec": {"type": "object", "required": ["chart"], "properties": {"chart": {"type": "object", "required": ["spec"], "properties": {"spec": {"type": "object", "required": ["chart"], "properties": {"chart": {"type": "string"}}}}}}, "not": {"required": ["dependsOn"]}}, "helm_repo_url": {"type": "string", "pattern": "https?://.*"}, "helm_secret_values": {"type": "object"}, "kustomization_substitute_secrets": {"type": "object", "additionalProperties": false, "patternProperties": {"^.*$": {"type": "string"}}}}, "dependentRequired": {"kustomization_substitute_secrets": ["kustomization_spec"], "helm_secret_values": ["helmrelease_spec"], "helm_repo_url": ["helmrelease_spec"]}, "anyOf": [{"required": ["helmrelease_spec"]}, {"required": ["kustomization_spec"]}, {"properties": {"enabled": {"const": false}}}], "allOf": [{"not": {"required": ["repo", "helm_repo_url"]}}, {"if": {"not": {"required": ["helmrelease_spec"]}}, "then": {"properties": {"kustomization_spec": {"required": ["path"]}}}}, {"if": {"required": ["helmrelease_spec"]}, "then": {"properties": {"kustomization_spec": {"not": {"required": ["path"]}}}}}]}}}, "cluster": {"type": "object", "additionalProperties": false, "required": ["capi_providers", "image"], "properties": {"name": {"type": "string"}, "admin_password": {"type": "string"}, "image": {"type": "string"}, "capi_providers": {"type": "object", "additionalProperties": false, "properties": {"infra_provider": {"enum": ["capd", "capo", "capv", "capm3"]}, "bootstrap_provider": {"enum": ["cabpk", "cabpr"]}}}, "cluster_external_ip": {"type": "string", "format": "ip"}, "cis_benchmark_scan_profile": {"type": "string"}, "flux_webui": {"type": "object", "additionalProperties": false, "properties": {"admin_user": {"type": "string"}, "admin_password": {"type": "string"}}}, "rancher": {"type": "object", "additionalProperties": false, "properties": {"external_hostname": {"type": "string", "format": "hostname"}}}, "vault": {"type": "object", "additionalProperties": false, "properties": {"external_hostname": {"type": "string", "format": "hostname"}}}, "capd": {"type": "object", "additionalProperties": false, "properties": {"docker_host": {"type": "string", "format": "uri", "pattern": "^(unix|tcp)://.*"}}}, "metal3": {"type": "object", "properties": {"ironic_ip": {"type": "string", "format": "ip"}}}, "capo": {"type": "object"}, "test_workload_cluster_name": {"type": "string", "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$"}}, "allOf": [{"if": {"properties": {"capi_providers": {"properties": {"infra_provider": {"const": "capo"}}}}}, "then": {"properties": {"capo": {"type": "object", "additionalProperties": false, "properties": {"flavor_name": {"type": "string"}, "ssh_key_name": {"type": "string"}, "network_id": {"type": "string"}, "clouds_yaml": {"type": "object", "additionalProperties": false, "properties": {"clouds": {"type": "object", "additionalProperties": false, "required": ["capo_cloud"], "patternProperties": {"(capo_cloud|.*)": {"type": "object", "additionalProperties": true, "required": ["auth"], "properties": {"auth": {"type": "object", "additionalProperties": true, "required": ["auth_url", "username", "password", "project_name", "project_domain_name", "user_domain_name"], "properties": {"auth_url": {"type": "string", "format": "uri"}, "user_domain_name": {"type": "string"}, "project_domain_name": {"type": "string"}, "project_name": {"type": "string"}, "username": {"type": "string"}, "password": {"type": "string"}, "region": {"anyOf": [{"type": "string"}, {"type": "null"}]}}}, "verify": {"type": "boolean"}}}}}}}, "cacert": {"type": "string"}, "storageClass": {"type": "object", "additionalProperties": false, "properties": {"name": {"type": "string"}, "type": {"type": "string"}}}}}}}}]}, "proxies": {"type": "object", "additionalProperties": false, "patternProperties": {"https?_proxy": {"type": "string", "pattern": "^(https?://.*|)$"}, "no_proxy": {"type": "string"}}, "required": ["http_proxy", "https_proxy", "no_proxy"]}, "phase": {"type": "string", "enum": ["management", "bootstrap"]}, "component_default_enable": {"$ref": "#/$defs/enabled"}, "test_all_components_enabled": {"anyOf": [{"type": "boolean"}, {"type": "null"}]}, "env_type_ci": {"type": "boolean"}, "dockerio_registry_mirror": {"type": "string", "anyOf": [{"format": "uri"}, {"const": ""}]}}}
>>>>>>> 801c52d (Rename cluster.flavor into cluster.capi_providers)
