{
  "$schema": "https://json-schema.org/draft/2020-12/schema#",
  "title": "Schema for sylva-units chart values",
  "description": "---------------------------------------------------------------------- DO NOT EDIT THIS FILE AS JSON, THE YAML VERSION IS THE SOURCE OF TRUTH ----------------------------------------------------------------------",
  "$defs": {
    "ipv4-cidr": {
      "type": "string",
      "pattern": "^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(?:\\/([1-9]|[12]\\d|3[01]))$"
    },
    "ipv4-cidr-full": {
      "type": "string",
      "pattern": "^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(?:\\/([1-9]|[12]\\d|3[012]))$"
    },
    "ipv4-range": {
      "type": "string",
      "pattern": "^(?:(?:[01]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])\\.){3}(?:[01]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])-(?:(?:[01]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])\\.){3}(?:[01]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])$"
    },
    "ipv4-prefix": {
      "anyOf": [
        {
          "type": "integer",
          "minimum": 0,
          "maximum": 32
        },
        {
          "type": "string",
          "pattern": "^([0-9]|[12]\\d|3[012])$"
        }
      ]
    },
    "capm3-NetworkDataRoutev4": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "network",
          "prefix",
          "gateway"
        ],
        "properties": {
          "network": {
            "type": "string",
            "format": "ipv4"
          },
          "prefix": {
            "$ref": "#/$defs/ipv4-prefix"
          },
          "gateway": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "string": {
                "type": "string",
                "format": "ipv4"
              },
              "fromIPPool": {
                "type": "string"
              }
            }
          },
          "services": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "dns": {
                "type": "array",
                "items": {
                  "anyOf": [
                    {
                      "type": "string",
                      "format": "ipv4"
                    },
                    {
                      "type": "string",
                      "format": "hostname"
                    }
                  ]
                }
              },
              "dnsFromIPPool": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "capo-machine-rootVolume": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "diskSize": {
          "type": "integer"
        },
        "volumeType": {
          "type": "string"
        }
      }
    },
    "capv-machine": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "image_name": {
          "type": "string"
        },
        "diskGiB": {
          "type": "integer"
        },
        "memoryMiB": {
          "type": "integer"
        },
        "numCPUs": {
          "type": "integer"
        }
      }
    },
    "capm3-machine": {
      "type": "object",
      "properties": {
        "machine_image_url": {
          "type": "string",
          "pattern": "^(https?://.*|)$"
        },
        "machine_image_format": {
          "type": "string"
        },
        "machine_image_checksum": {
          "type": "string",
          "pattern": "^(https?://.*|)$"
        },
        "machine_image_checksum_type": {
          "type": "string"
        },
        "provisioning_pool_interface": {
          "type": "string"
        },
        "public_pool_interface": {
          "type": "string"
        },
        "networkData": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "provisioning_pool_interface": {
              "type": "object",
              "properties": {
                "routes": {
                  "$ref": "#/$defs/capm3-NetworkDataRoutev4"
                }
              }
            },
            "public_pool_interface": {
              "type": "object",
              "properties": {
                "routes": {
                  "$ref": "#/$defs/capm3-NetworkDataRoutev4"
                }
              }
            }
          }
        },
        "hostSelector": {
          "type": "object"
        }
      }
    },
    "rke2": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "additionalUserData": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "strict": {
              "type": "boolean"
            },
            "config": {
              "type": "object"
            }
          }
        },
        "nodeLabels": {
          "type": "object"
        }
      }
    },
    "kubeadm-users": {
      "type": "object",
      "properties": {
        "users": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "name",
              "groups",
              "sudo",
              "shell",
              "sshAuthorizedKeys"
            ]
          }
        }
      }
    },
    "bootstrap-additional-commands": {
      "type": "object",
      "properties": {
        "pre_bootstrap_commands": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "post_bootstrap_commands": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "container-image": {
      "type": "object",
      "properties": {
        "repository": {
          "type": "string"
        },
        "tag": {
          "type": "string"
        }
      }
    },
    "baremetal-host": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "credentials": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "username": {
              "type": "string"
            },
            "password": {
              "type": "string"
            }
          }
        },
        "bmh_metadata": {
          "type": "object",
          "properties": {
            "labels": {
              "type": "object"
            },
            "annotations": {
              "type": "object"
            }
          }
        },
        "bmh_spec": {
          "type": "object",
          "properties": {
            "automatedCleaningMode": {
              "type": "string"
            },
            "bmc": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "address": {
                  "type": "string"
                },
                "credentialsName": {
                  "type": "string"
                },
                "disableCertificateVerification": {
                  "type": "boolean"
                }
              }
            },
            "bootMACAddress": {
              "type": "string"
            },
            "bootMode": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "externallyProvisioned": {
              "type": "boolean"
            },
            "rootDeviceHints": {
              "type": "object",
              "anyOf": [
                {
                  "required": [
                    "hctl"
                  ]
                },
                {
                  "required": [
                    "deviceName"
                  ]
                }
              ],
              "properties": {
                "hctl": {
                  "type": "string"
                },
                "deviceName": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "machine-deployment": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "infra_provider": {
          "type": "string"
        },
        "replicas": {
          "type": "integer"
        },
        "metadata": {
          "type": "object",
          "properties": {
            "labels": {
              "type": "object"
            },
            "annotations": {
              "type": "object"
            }
          }
        },
        "kubelet_extra_args": {
          "type": "object"
        },
        "rke2": {
          "$ref": "#/$defs/rke2"
        },
        "kubeadm": {
          "$ref": "#/$defs/kubeadm-users"
        },
        "additional_commands": {
          "$ref": "#/$defs/bootstrap-additional-commands"
        },
        "capo": {
          "type": "object",
          "properties": {
            "image_name": {
              "type": "string"
            },
            "flavor_name": {
              "type": "string"
            },
            "rootVolume": {
              "$ref": "#/$defs/capo-machine-rootVolume"
            },
            "network_id": {
              "type": "string"
            },
            "server_group_id": {
              "type": "string"
            },
            "security_group_name": {
              "type": "string"
            },
            "identity_ref_secret": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "clouds_yaml": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "clouds": {
                      "type": "object",
                      "additionalProperties": false,
                      "required": [
                        "capo_cloud"
                      ],
                      "patternProperties": {
                        "(capo_cloud|.*)": {
                          "type": "object",
                          "additionalProperties": true,
                          "required": [
                            "auth"
                          ],
                          "properties": {
                            "auth": {
                              "type": "object",
                              "additionalProperties": true,
                              "required": [
                                "auth_url",
                                "username",
                                "password",
                                "project_name",
                                "project_domain_name",
                                "user_domain_name"
                              ],
                              "properties": {
                                "auth_url": {
                                  "type": "string",
                                  "format": "uri"
                                },
                                "user_domain_name": {
                                  "type": "string"
                                },
                                "project_domain_name": {
                                  "type": "string"
                                },
                                "project_name": {
                                  "type": "string"
                                },
                                "username": {
                                  "type": "string"
                                },
                                "password": {
                                  "type": "string"
                                }
                              }
                            },
                            "region_name": {
                              "anyOf": [
                                {
                                  "type": "string"
                                },
                                {
                                  "type": "null"
                                }
                              ]
                            },
                            "verify": {
                              "type": "boolean"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "capv": {
          "$ref": "#/$defs/capv-machine"
        },
        "capm3": {
          "$ref": "#/$defs/capm3-machine"
        },
        "network_interfaces": {
          "type": "object"
        }
      }
    },
    "gotpl": {
      "type": "string",
      "pattern": "^{{ .* }}$"
    },
    "username-password": {
      "anyOf": [
        {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^(username|password)$": {
              "type": "string"
            }
          }
        },
        {
          "$ref": "#/$defs/gotpl"
        }
      ]
    },
    "boolean-string": {
      "type": "string",
      "enum": [
        "true",
        "false",
        ""
      ]
    },
    "enabled": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "$ref": "#/$defs/gotpl"
        },
        {
          "$ref": "#/$defs/boolean-string"
        }
      ]
    },
    "string-with-gotpl": {
      "type": "string",
      "pattern": ".*{{ .* }}.*"
    },
    "sylva-capi-cluster-values": {
      "$schema": "https://json-schema.org/draft/2020-12/schema#",
      "title": "Schema for sylva-capi-cluster chart values",
      "description": "---------------------------------------------------------------------- DO NOT EDIT THIS FILE AS JSON, THE YAML VERSION IS THE SOURCE OF TRUTH ----------------------------------------------------------------------",
      "additionalProperties": false,
      "required": [
        "capi_providers",
        "cluster_external_ip"
      ],
      "properties": {
        "name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "air_gapped": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cis_profile": {
          "anyOf": [
            {
              "type": "string",
              "enum": [
                "",
                "cis-1.6",
                "cis-1.23"
              ]
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "default_cni": {
          "anyOf": [
            {
              "type": "string",
              "enum": [
                "calico",
                "cilium"
              ]
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "capi_providers": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "infra_provider",
                "bootstrap_provider"
              ],
              "properties": {
                "infra_provider": {
                  "anyOf": [
                    {
                      "enum": [
                        "capd",
                        "capo",
                        "capv",
                        "capm3"
                      ]
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "bootstrap_provider": {
                  "anyOf": [
                    {
                      "enum": [
                        "cabpk",
                        "cabpr"
                      ]
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "k8s_version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "control_plane_replicas": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cluster_services_cidrs": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/$defs/ipv4-cidr"
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cluster_pods_cidrs": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/$defs/ipv4-cidr"
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "capd": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "docker_host_socket": {
                  "anyOf": [
                    {
                      "type": "string",
                      "not": {
                        "anyOf": [
                          {
                            "type": "string",
                            "pattern": "^file://.*"
                          },
                          {
                            "type": "string",
                            "pattern": "^unix://.*"
                          }
                        ]
                      }
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "image_name": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "capo": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "capv": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cluster_external_ip": {
          "anyOf": [
            {
              "type": "string",
              "format": "ipv4"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cluster_public_ip": {
          "anyOf": [
            {
              "type": "string",
              "format": "ipv4"
            },
            {
              "type": "string",
              "maxLength": 0
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cluster_api_cert_extra_SANs": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cluster_external_ip_interfaces": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "metallb_helm_oci_url": {
          "type": "string",
          "anyOf": [
            {
              "pattern": "^oci://.*"
            },
            {
              "const": ""
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "metallb_helm_version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "dns_resolver": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "enable_longhorn": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "mgmt_cluster_external_ip": {
          "anyOf": [
            {
              "type": "string",
              "format": "ipv4"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "mgmt_cluster_external_domain": {
          "anyOf": [
            {
              "type": "string",
              "format": "hostname"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "ntp": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "patternProperties": {
                "enabled": {
                  "anyOf": [
                    {
                      "type": "boolean"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "servers": {
                  "anyOf": [
                    {
                      "type": "array",
                      "items": {
                        "anyOf": [
                          {
                            "type": "string",
                            "format": "ipv4"
                          },
                          {
                            "type": "string",
                            "format": "hostname"
                          }
                        ]
                      }
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "proxies": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "patternProperties": {
                "https?_proxy": {
                  "anyOf": [
                    {
                      "type": "string",
                      "pattern": "^(https?://.*|)$"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "no_proxy": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              },
              "required": [
                "http_proxy",
                "https_proxy",
                "no_proxy"
              ]
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "registry_mirrors": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "default_settings": {
                  "anyOf": [
                    {
                      "type": "object"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "hosts_config": {
                  "anyOf": [
                    {
                      "type": "object",
                      "additionalProperties": false,
                      "patternProperties": {
                        "^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {
                          "anyOf": [
                            {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "additionalProperties": false,
                                "properties": {
                                  "registry_settings": {
                                    "type": "object"
                                  },
                                  "mirror_url": {
                                    "type": "string",
                                    "format": "uri",
                                    "pattern": "^(https?://.*|)$"
                                  }
                                }
                              }
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      }
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "bgp_lbs": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "kube_vip": {
                  "anyOf": [
                    {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "bgp_routerid": {
                          "anyOf": [
                            {
                              "type": "string",
                              "format": "ipv4"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "bgp_routerinterface": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "bgp_sourceif": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "bgp_sourceip": {
                          "anyOf": [
                            {
                              "type": "string",
                              "format": "ipv4"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "bgp_as": {
                          "anyOf": [
                            {
                              "type": "integer"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "bgp_peers": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "vip_cidr": {
                          "anyOf": [
                            {
                              "type": "integer"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      }
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "metallb": {
                  "anyOf": [
                    {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "address_pools": {
                          "anyOf": [
                            {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "required": [
                                  "name",
                                  "addresses"
                                ],
                                "properties": {
                                  "name": {
                                    "type": "string"
                                  },
                                  "addresses": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "$ref": "#/$defs/ipv4-cidr-full"
                                        },
                                        {
                                          "$ref": "#/$defs/ipv4-range"
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "l3_options": {
                          "anyOf": [
                            {
                              "type": "object",
                              "additionalProperties": false,
                              "properties": {
                                "bgp_peers": {
                                  "anyOf": [
                                    {
                                      "type": "array",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "name",
                                          "local_asn",
                                          "peer_asn",
                                          "peer_address"
                                        ],
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          },
                                          "local_asn": {
                                            "type": "integer",
                                            "minimum": 1,
                                            "maximum": 4294967295
                                          },
                                          "peer_asn": {
                                            "type": "integer",
                                            "minimum": 1,
                                            "maximum": 4294967295
                                          },
                                          "peer_address": {
                                            "type": "string",
                                            "format": "ipv4"
                                          },
                                          "advertised_pools": {
                                            "type": "array",
                                            "items": {
                                              "type": "string"
                                            }
                                          }
                                        }
                                      }
                                    },
                                    {
                                      "$ref": "#/$defs/string-with-gotpl"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                }
                              }
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      }
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "capm3": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "public_pool_name": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "public_pool_network": {
                  "anyOf": [
                    {
                      "type": "string",
                      "format": "ipv4"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "public_pool_gateway": {
                  "anyOf": [
                    {
                      "type": "string",
                      "format": "ipv4"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "public_pool_end": {
                  "anyOf": [
                    {
                      "type": "string",
                      "format": "ipv4"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "public_pool_start": {
                  "anyOf": [
                    {
                      "type": "string",
                      "format": "ipv4"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "public_pool_prefix": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/ipv4-prefix"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "provisioning_pool_name": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "provisioning_pool_network": {
                  "anyOf": [
                    {
                      "type": "string",
                      "format": "ipv4"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "provisioning_pool_gateway": {
                  "anyOf": [
                    {
                      "type": "string",
                      "format": "ipv4"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "provisioning_pool_end": {
                  "anyOf": [
                    {
                      "type": "string",
                      "format": "ipv4"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "provisioning_pool_start": {
                  "anyOf": [
                    {
                      "type": "string",
                      "format": "ipv4"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "provisioning_pool_prefix": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/ipv4-prefix"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "dns_server": {
                  "anyOf": [
                    {
                      "type": "string",
                      "format": "ipv4"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "machine_image_url": {
                  "anyOf": [
                    {
                      "type": "string",
                      "pattern": "^(https?://.*|)$"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "machine_image_format": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "machine_image_checksum": {
                  "anyOf": [
                    {
                      "type": "string",
                      "pattern": "^(https?://.*|)$"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "machine_image_checksum_type": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "provisioning_pool_interface": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "public_pool_interface": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "networkData": {
                  "anyOf": [
                    {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "provisioning_pool_interface": {
                          "anyOf": [
                            {
                              "type": "object",
                              "properties": {
                                "routes": {
                                  "anyOf": [
                                    {
                                      "$ref": "#/$defs/capm3-NetworkDataRoutev4"
                                    },
                                    {
                                      "$ref": "#/$defs/string-with-gotpl"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                }
                              }
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "public_pool_interface": {
                          "anyOf": [
                            {
                              "type": "object",
                              "properties": {
                                "routes": {
                                  "anyOf": [
                                    {
                                      "$ref": "#/$defs/capm3-NetworkDataRoutev4"
                                    },
                                    {
                                      "$ref": "#/$defs/string-with-gotpl"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                }
                              }
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      }
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "images": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "vsphere_csi_node": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "node_driver_registrar": {
                          "anyOf": [
                            {
                              "$ref": "#/$defs/container-image"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "vsphere_csi_node": {
                          "anyOf": [
                            {
                              "$ref": "#/$defs/container-image"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "liveness_probe": {
                          "anyOf": [
                            {
                              "$ref": "#/$defs/container-image"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      }
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "vsphere_csi_controller": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "csi_attacher": {
                          "anyOf": [
                            {
                              "$ref": "#/$defs/container-image"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "vsphere_csi_controller": {
                          "anyOf": [
                            {
                              "$ref": "#/$defs/container-image"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "liveness_probe": {
                          "anyOf": [
                            {
                              "$ref": "#/$defs/container-image"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "vsphere_syncer": {
                          "anyOf": [
                            {
                              "$ref": "#/$defs/container-image"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "csi_provisioner": {
                          "anyOf": [
                            {
                              "$ref": "#/$defs/container-image"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      }
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "vsphere_cloud_controller_manager": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/container-image"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "kube_vip": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/container-image"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "kubelet_extra_args": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "rke2": {
          "anyOf": [
            {
              "$ref": "#/$defs/rke2"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "kubeadm": {
          "anyOf": [
            {
              "$ref": "#/$defs/kubeadm-users"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "control_plane": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "kubelet_extra_args": {
                  "anyOf": [
                    {
                      "type": "object"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "rke2": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/rke2"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "kubeadm": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/kubeadm-users"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "additional_commands": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/bootstrap-additional-commands"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "capo": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "image_name": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "flavor_name": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "rootVolume": {
                          "anyOf": [
                            {
                              "$ref": "#/$defs/capo-machine-rootVolume"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "server_group_id": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "security_group_name": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "$ref": "#/$defs/string-with-gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      }
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "capv": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/capv-machine"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "capm3": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/capm3-machine"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "network_interfaces": {
                  "anyOf": [
                    {
                      "type": "object"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "machine_deployment_default": {
          "anyOf": [
            {
              "$ref": "#/$defs/machine-deployment"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "machine_deployments": {
          "anyOf": [
            {
              "type": "object",
              "patternProperties": {
                "^[a-z0-9][a-z0-9-]*[a-z0-9]$": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/machine-deployment"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "baremetal_host_default": {
          "anyOf": [
            {
              "$ref": "#/$defs/baremetal-host"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "baremetal_hosts": {
          "anyOf": [
            {
              "type": "object",
              "patternProperties": {
                "^[a-z0-9][a-z0-9-]*[a-z0-9]$": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/baremetal-host"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "apiVersions": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "patternProperties": {
                "^[A-Za-z0-9]+$": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "allOf": [
        {
          "if": {
            "properties": {
              "capi_providers": {
                "properties": {
                  "infra_provider": {
                    "const": "capo"
                  }
                }
              }
            }
          },
          "then": {
            "required": [
              "capo"
            ],
            "properties": {
              "capo": {
                "anyOf": [
                  {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "image_name": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "flavor_name": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "rootVolume": {
                        "anyOf": [
                          {
                            "$ref": "#/$defs/capo-machine-rootVolume"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "control_plane_az": {
                        "anyOf": [
                          {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "ssh_key_name": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "network_id": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "clouds_yaml": {
                        "anyOf": [
                          {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                              "clouds": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "additionalProperties": false,
                                    "required": [
                                      "capo_cloud"
                                    ],
                                    "patternProperties": {
                                      "(capo_cloud|.*)": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "additionalProperties": true,
                                            "required": [
                                              "auth"
                                            ],
                                            "properties": {
                                              "auth": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "additionalProperties": true,
                                                    "required": [
                                                      "auth_url",
                                                      "username",
                                                      "password",
                                                      "project_name",
                                                      "project_domain_name",
                                                      "user_domain_name"
                                                    ],
                                                    "properties": {
                                                      "auth_url": {
                                                        "anyOf": [
                                                          {
                                                            "type": "string",
                                                            "format": "uri"
                                                          },
                                                          {
                                                            "$ref": "#/$defs/string-with-gotpl"
                                                          },
                                                          {
                                                            "type": "null"
                                                          }
                                                        ]
                                                      },
                                                      "user_domain_name": {
                                                        "anyOf": [
                                                          {
                                                            "type": "string"
                                                          },
                                                          {
                                                            "$ref": "#/$defs/string-with-gotpl"
                                                          },
                                                          {
                                                            "type": "null"
                                                          }
                                                        ]
                                                      },
                                                      "project_domain_name": {
                                                        "anyOf": [
                                                          {
                                                            "type": "string"
                                                          },
                                                          {
                                                            "$ref": "#/$defs/string-with-gotpl"
                                                          },
                                                          {
                                                            "type": "null"
                                                          }
                                                        ]
                                                      },
                                                      "project_name": {
                                                        "anyOf": [
                                                          {
                                                            "type": "string"
                                                          },
                                                          {
                                                            "$ref": "#/$defs/string-with-gotpl"
                                                          },
                                                          {
                                                            "type": "null"
                                                          }
                                                        ]
                                                      },
                                                      "username": {
                                                        "anyOf": [
                                                          {
                                                            "type": "string"
                                                          },
                                                          {
                                                            "$ref": "#/$defs/string-with-gotpl"
                                                          },
                                                          {
                                                            "type": "null"
                                                          }
                                                        ]
                                                      },
                                                      "password": {
                                                        "anyOf": [
                                                          {
                                                            "type": "string"
                                                          },
                                                          {
                                                            "$ref": "#/$defs/string-with-gotpl"
                                                          },
                                                          {
                                                            "type": "null"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  },
                                                  {
                                                    "$ref": "#/$defs/string-with-gotpl"
                                                  },
                                                  {
                                                    "type": "null"
                                                  }
                                                ]
                                              },
                                              "region_name": {
                                                "anyOf": [
                                                  {
                                                    "type": "string"
                                                  },
                                                  {
                                                    "type": "null"
                                                  },
                                                  {
                                                    "$ref": "#/$defs/string-with-gotpl"
                                                  },
                                                  {
                                                    "type": "null"
                                                  }
                                                ]
                                              },
                                              "verify": {
                                                "anyOf": [
                                                  {
                                                    "type": "boolean"
                                                  },
                                                  {
                                                    "$ref": "#/$defs/string-with-gotpl"
                                                  },
                                                  {
                                                    "type": "null"
                                                  }
                                                ]
                                              }
                                            }
                                          },
                                          {
                                            "$ref": "#/$defs/string-with-gotpl"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      }
                                    }
                                  },
                                  {
                                    "$ref": "#/$defs/string-with-gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            }
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "cacert": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "resources_tag": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      }
                    }
                  },
                  {
                    "$ref": "#/$defs/string-with-gotpl"
                  },
                  {
                    "type": "null"
                  }
                ]
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "capi_providers": {
                "properties": {
                  "infra_provider": {
                    "const": "capv"
                  }
                }
              }
            }
          },
          "then": {
            "properties": {
              "capv": {
                "anyOf": [
                  {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "dataCenter": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "username": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "password": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "image_name": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "diskGiB": {
                        "anyOf": [
                          {
                            "type": "integer"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "memoryMiB": {
                        "anyOf": [
                          {
                            "type": "integer"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "numCPUs": {
                        "anyOf": [
                          {
                            "type": "integer"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "networks": {
                        "anyOf": [
                          {
                            "type": "object",
                            "additionalProperties": true,
                            "patternProperties": {
                              "^[a-z0-9][a-z0-9-]*[a-z0-9]$": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "additionalProperties": false,
                                    "properties": {
                                      "dhcp4": {
                                        "anyOf": [
                                          {
                                            "type": "boolean"
                                          },
                                          {
                                            "$ref": "#/$defs/string-with-gotpl"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      },
                                      "networkName": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "$ref": "#/$defs/string-with-gotpl"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      }
                                    },
                                    "required": [
                                      "networkName"
                                    ]
                                  },
                                  {
                                    "$ref": "#/$defs/string-with-gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            }
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "server": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "dataStore": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "tlsThumbprint": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "ssh_key": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "folder": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "resourcePool": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "storagePolicyName": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "template_clone_mode": {
                        "anyOf": [
                          {
                            "type": "string",
                            "enum": [
                              "linkedClone",
                              "fullClone"
                            ]
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "storageClass": {
                        "anyOf": [
                          {
                            "type": "object",
                            "properties": {
                              "storagePolicyName": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "$ref": "#/$defs/string-with-gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "fsType": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "$ref": "#/$defs/string-with-gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            }
                          },
                          {
                            "$ref": "#/$defs/string-with-gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      }
                    }
                  },
                  {
                    "$ref": "#/$defs/string-with-gotpl"
                  },
                  {
                    "type": "null"
                  }
                ]
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "dns_resolver": {
                "const": true
              }
            },
            "required": [
              "dns_resolver"
            ]
          },
          "then": {
            "required": [
              "mgmt_cluster_external_ip",
              "mgmt_cluster_external_domain"
            ]
          }
        },
        {
          "if": {
            "properties": {
              "capi_providers": {
                "properties": {
                  "bootstrap_provider": {
                    "const": "cabpr"
                  }
                }
              }
            }
          },
          "then": {
            "required": [
              "cis_profile"
            ]
          }
        }
      ]
    }
  },
  "additionalProperties": false,
  "required": [
    "registry_secret",
    "git_repo_spec_default",
    "source_templates",
    "helm_repo_spec_default",
    "unit_kustomization_spec_default",
    "unit_helmrelease_spec_default",
    "unit_helmrelease_kustomization_spec_default",
    "units_enabled_default",
    "units",
    "cluster",
    "proxies",
    "env_type",
    "registry_mirrors"
  ],
  "properties": {
    "fullnameOverride": {
      "type": "string"
    },
    "nameOverride": {
      "type": "string"
    },
    "registry_secret": {
      "type": "object",
      "patternProperties": {
        "^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {
          "anyOf": [
            {
              "type": "string",
              "pattern": "{{ .* }}"
            },
            {
              "$ref": "#/$defs/username-password"
            }
          ]
        }
      }
    },
    "git_repo_spec_default": {
      "type": "object"
    },
    "oci_repo_spec_default": {
      "type": "object"
    },
    "source_templates": {
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {
          "type": "object",
          "additionalProperties": false,
          "anyOf": [
            {
              "required": [
                "spec",
                "kind"
              ]
            },
            {
              "required": [
                "existing_source"
              ]
            }
          ],
          "properties": {
            "existing_source": {
              "anyOf": [
                {
                  "type": "null"
                },
                {
                  "type": "object",
                  "required": [
                    "name",
                    "kind"
                  ],
                  "additionalProperties": false,
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "kind": {
                      "type": "string",
                      "enum": [
                        "GitRepository",
                        "OCIRepository"
                      ]
                    },
                    "namespace": {
                      "type": "string"
                    }
                  }
                }
              ]
            },
            "auth": {
              "$ref": "#/$defs/username-password"
            },
            "kind": {
              "type": "string",
              "enum": [
                "GitRepository",
                "OCIRepository"
              ]
            },
            "spec": {
              "type": "object",
              "required": [
                "url",
                "ref"
              ],
              "properties": {
                "url": {
                  "anyOf": [
                    {
                      "type": "string",
                      "format": "uri"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    }
                  ]
                }
              },
              "not": {
                "required": [
                  "secretRef"
                ]
              }
            }
          },
          "allOf": [
            {
              "if": {
                "properties": {
                  "kind": {
                    "const": "GitRepository"
                  }
                }
              },
              "then": {
                "properties": {
                  "spec": {
                    "type": "object",
                    "properties": {
                      "ref": {
                        "type": "object",
                        "additionalProperties": false,
                        "anyOf": [
                          {
                            "required": [
                              "branch"
                            ]
                          },
                          {
                            "required": [
                              "tag"
                            ]
                          },
                          {
                            "required": [
                              "commit"
                            ]
                          }
                        ],
                        "patternProperties": {
                          "(branch|tag|commit)": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            {
              "if": {
                "properties": {
                  "kind": {
                    "const": "OCIRepository"
                  }
                }
              },
              "then": {
                "properties": {
                  "spec": {
                    "type": "object",
                    "properties": {
                      "ref": {
                        "type": "object",
                        "additionalProperties": false,
                        "anyOf": [
                          {
                            "required": [
                              "digest"
                            ]
                          },
                          {
                            "required": [
                              "semver"
                            ]
                          },
                          {
                            "required": [
                              "tag"
                            ]
                          }
                        ],
                        "patternProperties": {
                          "(digest|semver|tag)": {
                            "type": "string"
                          },
                          "branch": {
                            "const": "{{ tuple \"(unused)\" false | include \"set-only-if\" }}"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          ]
        }
      }
    },
    "helm_repo_spec_default": {
      "type": "object"
    },
    "unit_kustomization_spec_default": {
      "type": "object"
    },
    "unit_helmrelease_spec_default": {
      "type": "object"
    },
    "unit_helmrelease_kustomization_spec_default": {
      "type": "object"
    },
    "unit_templates": {
      "type": "object",
      "^[a-z0-9][a-z0-9-]*[a-z0-9]$": {
        "type": "object"
      }
    },
    "units": {
      "type": "object",
      "patternProperties": {
        "^[a-z0-9][a-z0-9-]*[a-z0-9]$": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "$ref": "#/$defs/enabled"
            },
            "enabled_conditions": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/enabled"
              }
            },
            "unit_template": {
              "type": "string",
              "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$"
            },
            "repo": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ]
            },
            "labels": {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "type": "string"
                }
              }
            },
            "annotations": {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "type": "string"
                }
              }
            },
            "depends_on": {
              "anyOf": [
                {
                  "type": "object",
                  "patternProperties": {
                    "^([a-z0-9][a-z0-9-]*[a-z0-9](/[a-z0-9][a-z0-9-]*[a-z0-9])?|{{ .* }})$": {
                      "anyOf": [
                        {
                          "type": "boolean"
                        },
                        {
                          "$ref": "#/$defs/gotpl"
                        }
                      ]
                    }
                  }
                },
                {
                  "$ref": "#/$defs/gotpl"
                }
              ]
            },
            "ref_override": {
              "type": "string"
            },
            "kustomization_spec": {
              "type": "object",
              "properties": {
                "path": {
                  "type": "string"
                },
                "_patches": {
                  "type": "array",
                  "items": {
                    "anyOf": [
                      {
                        "type": "object"
                      },
                      {
                        "$ref": "#/$defs/gotpl"
                      }
                    ]
                  }
                },
                "_components": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "allOf": [
                {
                  "not": {
                    "required": [
                      "dependsOn"
                    ]
                  }
                },
                {
                  "not": {
                    "required": [
                      "wait",
                      "healthChecks"
                    ],
                    "properties": {
                      "wait": {
                        "const": true
                      }
                    }
                  }
                },
                {
                  "not": {
                    "required": [
                      "sourceRef"
                    ]
                  }
                }
              ]
            },
            "helmrelease_spec": {
              "type": "object",
              "required": [
                "chart"
              ],
              "properties": {
                "chart": {
                  "type": "object",
                  "required": [
                    "spec"
                  ],
                  "properties": {
                    "spec": {
                      "type": "object",
                      "required": [
                        "chart"
                      ],
                      "properties": {
                        "chart": {
                          "type": "string"
                        }
                      }
                    }
                  }
                },
                "_postRenderers": {
                  "type": "array",
                  "items": {
                    "anyOf": [
                      {
                        "type": "object"
                      },
                      {
                        "$ref": "#/$defs/gotpl"
                      }
                    ]
                  }
                }
              },
              "not": {
                "required": [
                  "dependsOn"
                ]
              }
            },
            "helm_repo_url": {
              "anyOf": [
                {
                  "type": "string",
                  "pattern": "(https?|oci)://.*"
                },
                {
                  "$ref": "#/$defs/gotpl"
                }
              ]
            },
            "helm_chart_artifact_name": {
              "type": "string"
            },
            "helm_secret_values": {
              "anyOf": [
                {
                  "type": "object"
                },
                {
                  "$ref": "#/$defs/gotpl"
                }
              ]
            },
            "kustomization_substitute_secrets": {
              "type": "object",
              "additionalProperties": false,
              "patternProperties": {
                "^.*$": {
                  "type": "string"
                }
              }
            }
          },
          "dependentRequired": {
            "kustomization_substitute_secrets": [
              "kustomization_spec"
            ],
            "helm_secret_values": [
              "helmrelease_spec"
            ],
            "helm_repo_url": [
              "helmrelease_spec"
            ],
            "helm_chart_artifact_name": [
              "helmrelease_spec"
            ]
          },
          "allOf": [
            {
              "anyOf": [
                {
                  "required": [
                    "helmrelease_spec"
                  ]
                },
                {
                  "required": [
                    "kustomization_spec"
                  ]
                }
              ]
            },
            {
              "anyOf": [
                {
                  "properties": {
                    "enabled": {
                      "const": false
                    }
                  }
                },
                {
                  "allOf": [
                    {
                      "not": {
                        "required": [
                          "repo",
                          "helm_repo_url"
                        ],
                        "properties": {
                          "repo": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "not": {
                          "required": [
                            "helmrelease_spec"
                          ]
                        }
                      },
                      "then": {
                        "properties": {
                          "kustomization_spec": {
                            "allOf": [
                              {
                                "required": [
                                  "path"
                                ]
                              },
                              {
                                "anyOf": [
                                  {
                                    "required": [
                                      "wait"
                                    ]
                                  },
                                  {
                                    "required": [
                                      "healthChecks"
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "required": [
                          "helmrelease_spec"
                        ]
                      },
                      "then": {
                        "anyOf": [
                          {
                            "not": {
                              "required": [
                                "kustomization_spec"
                              ]
                            }
                          },
                          {
                            "not": {
                              "properties": {
                                "kustomization_spec": {
                                  "required": [
                                    "path"
                                  ]
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    "cluster": {
      "$ref": "#/$defs/sylva-capi-cluster-values"
    },
    "openstack": {
      "type": "object"
    },
    "metal3": {
      "type": "object"
    },
    "capd_docker_host": {
      "type": "string",
      "format": "uri",
      "pattern": "^(unix|tcp)://.*"
    },
    "test_workload_cluster_name": {
      "type": "string",
      "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$"
    },
    "sriov": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "node_policies": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "resourceName",
              "numVfs",
              "nicSelector"
            ],
            "properties": {
              "nodeSelector": {
                "type": "object"
              },
              "resourceName": {
                "type": "string",
                "pattern": "^[a-z0-9][a-z0-9_.]*[a-z0-9]$"
              },
              "numVfs": {
                "type": "integer"
              },
              "nicSelector": {
                "type": "object",
                "additionalProperties": false,
                "minProperties": 1,
                "properties": {
                  "deviceID": {
                    "type": "string"
                  },
                  "vendor": {
                    "type": "string",
                    "pattern": "^[0-9a-f]{4}$"
                  },
                  "pfNames": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "rootDevices": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "cluster_external_ip": {
      "type": "string",
      "format": "ipv4"
    },
    "admin_password": {
      "type": "string"
    },
    "cis_benchmark_scan_profile": {
      "type": "string"
    },
    "flux_webui": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "admin_user": {
          "type": "string"
        }
      }
    },
    "display_external_ip": {
      "type": "string"
    },
    "cluster_external_domain": {
      "type": "string",
      "format": "hostname"
    },
    "cluster_public_endpoint": {
      "anyOf": [
        {
          "type": "string",
          "pattern": "^(https?://.*|)$"
        },
        {
          "$ref": "#/$defs/gotpl"
        }
      ]
    },
    "rancher": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "external_hostname": {
          "anyOf": [
            {
              "type": "string",
              "format": "hostname"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            }
          ]
        }
      }
    },
    "vault": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "external_hostname": {
          "anyOf": [
            {
              "type": "string",
              "format": "hostname"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            }
          ]
        }
      }
    },
    "keycloak": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "external_hostname": {
          "anyOf": [
            {
              "type": "string",
              "format": "hostname"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            }
          ]
        },
        "expire_password_policy": {
          "type": "integer"
        }
      }
    },
    "flux": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "external_hostname": {
          "anyOf": [
            {
              "type": "string",
              "format": "hostname"
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            }
          ]
        }
      }
    },
    "os_image_server": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "external_hostname": {
          "anyOf": [
            {
              "type": "string",
              "format": "hostname"
            },
            {
              "const": ""
            },
            {
              "$ref": "#/$defs/string-with-gotpl"
            }
          ]
        }
      }
    },
    "os_images": {
      "type": "object"
    },
    "libvirt_metal": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "node_count": {
          "type": "integer",
          "minimum": 0,
          "maximum": 9
        },
        "node_mem_gb": {
          "type": "integer",
          "minimum": 4
        },
        "node_cpus": {
          "type": "integer",
          "minimum": 4
        },
        "node_image": {
          "type": "string"
        }
      }
    },
    "proxies": {
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "https?_proxy": {
          "type": "string",
          "pattern": "^(https?://.*|)$"
        },
        "no_proxy": {
          "type": "string"
        }
      },
      "required": [
        "http_proxy",
        "https_proxy",
        "no_proxy"
      ]
    },
    "no_proxy_additional": {
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        ".*": {
          "type": "boolean"
        }
      }
    },
    "sylva_base_oci_registry": {
      "anyOf": [
        {
          "type": "string",
          "format": "uri",
          "pattern": "^oci://.*$"
        },
        {
          "$ref": "#/$defs/string-with-gotpl"
        }
      ]
    },
    "sylva_core_oci_registry": {
      "anyOf": [
        {
          "type": "string",
          "format": "uri",
          "pattern": "^oci://.*$"
        },
        {
          "$ref": "#/$defs/string-with-gotpl"
        }
      ]
    },
    "registry_mirrors": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "default_settings": {
          "type": "object"
        },
        "hosts_config": {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {
              "type": "array",
              "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "registry_settings": {
                    "type": "object"
                  },
                  "mirror_url": {
                    "type": "string",
                    "format": "uri",
                    "pattern": "^(https?://.*|)$"
                  }
                }
              }
            }
          }
        }
      }
    },
    "units_enabled_default": {
      "type": "boolean"
    },
    "units_override_enabled": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "env_type": {
      "type": "string",
      "pattern": "^(dev|ci|prod)$"
    },
    "ntp": {
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "enabled": {
          "type": "boolean"
        },
        "servers": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string",
                "format": "ipv4"
              },
              {
                "type": "string",
                "format": "hostname"
              }
            ]
          }
        }
      }
    },
    "_internal": {
      "type": "object"
    },
    "shared_workload_clusters_values": {
      "type": "object"
    },
    "shared_workload_clusters_secret_values": {
      "type": "object"
    }
  },
  "allOf": [
    {
      "properties": {
        "cluster": {
          "properties": {
            "cluster_external_ip": {
              "const": "{{ .Values.cluster_external_ip }}"
            }
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "cluster": {
            "properties": {
              "capi_providers": {
                "properties": {
                  "infra_provider": {
                    "const": "capo"
                  }
                }
              }
            }
          }
        }
      },
      "then": {
        "properties": {
          "openstack": {
            "additionalProperties": false,
            "properties": {
              "floating_ip": {
                "anyOf": [
                  {
                    "type": "string",
                    "format": "ipv4"
                  },
                  {
                    "type": "string",
                    "maxLength": 0
                  }
                ]
              },
              "storageClass": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "type": {
                    "type": "string"
                  }
                },
                "required": [
                  "type"
                ]
              },
              "control_plane_affinity_policy": {
                "type": "string",
                "enum": [
                  "anti-affinity",
                  "soft-anti-affinity"
                ]
              },
              "worker_affinity_policy": {
                "type": "string",
                "enum": [
                  "anti-affinity",
                  "soft-anti-affinity"
                ]
              },
              "external_network_id": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "cluster": {
            "properties": {
              "capi_providers": {
                "properties": {
                  "infra_provider": {
                    "const": "capm3"
                  }
                }
              }
            }
          }
        }
      },
      "then": {
        "properties": {
          "metal3": {
            "additionalProperties": false,
            "properties": {
              "bootstrap_ip": {
                "type": "string",
                "format": "ipv4"
              },
              "external_bootstrap_ip": {
                "type": "string",
                "format": "ipv4"
              }
            }
          }
        }
      }
    }
  ]
}