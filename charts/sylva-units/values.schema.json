{
  "$schema": "https://json-schema.org/draft/2020-12/schema#",
  "title": "Schema for sylva-units chart values",
  "description": "---------------------------------------------------------------------- DO NOT EDIT THIS FILE AS JSON, THE YAML VERSION IS THE SOURCE OF TRUTH ----------------------------------------------------------------------",
  "$defs": {
    "ipv4-cidr": {
      "type": "string",
      "pattern": "^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(?:\\/([1-9]|[12]\\d|3[01]))$"
    },
    "ipv4-cidr-full": {
      "type": "string",
      "pattern": "^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(?:\\/([1-9]|[12]\\d|3[012]))$"
    },
    "ipv4-range": {
      "type": "string",
      "pattern": "^(?:(?:[01]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])\\.){3}(?:[01]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])-(?:(?:[01]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])\\.){3}(?:[01]?[0-9]{1,2}|2[0-4][0-9]|25[0-5])$"
    },
    "gotpl": {
      "type": "string",
      "pattern": "^{{ .* }}$"
    },
    "username-password": {
      "anyOf": [
        {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^(username|password)$": {
              "type": "string"
            }
          }
        },
        {
          "$ref": "#/$defs/gotpl"
        }
      ]
    },
    "boolean-string": {
      "type": "string",
      "enum": [
        "true",
        "false",
        ""
      ]
    },
    "enabled": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "$ref": "#/$defs/gotpl"
        },
        {
          "$ref": "#/$defs/boolean-string"
        }
      ]
    },
    "string-with-gotpl": {
      "type": "string",
      "pattern": ".*{{ .* }}.*"
    },
    "sylva-capi-cluster-values": {
      "$schema": "https://json-schema.org/draft/2020-12/schema#",
      "title": "Schema for sylva-capi-cluster chart values",
      "description": "---------------------------------------------------------------------- DO NOT EDIT THIS FILE AS JSON, THE YAML VERSION IS THE SOURCE OF TRUTH ----------------------------------------------------------------------",
      "additionalProperties": false,
      "required": [
        "capi_providers",
        "cluster_external_ip"
      ],
      "properties": {
        "name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "air_gapped": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cis_profile": {
          "anyOf": [
            {
              "type": "string",
              "enum": [
                "",
                "cis-1.6",
                "cis-1.23"
              ]
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "default_cni": {
          "anyOf": [
            {
              "type": "string",
              "enum": [
                "calico",
                "cilium"
              ]
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "image": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "worker_machine_image": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "capi_providers": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "required": [
                "infra_provider",
                "bootstrap_provider"
              ],
              "properties": {
                "infra_provider": {
                  "anyOf": [
                    {
                      "enum": [
                        "capd",
                        "capo",
                        "capv",
                        "capm3"
                      ]
                    },
                    {
                      "$ref": "#/$defs/gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "bootstrap_provider": {
                  "anyOf": [
                    {
                      "enum": [
                        "cabpk",
                        "cabpr"
                      ]
                    },
                    {
                      "$ref": "#/$defs/gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "k8s_version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "control_plane_replicas": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cluster_services_cidrs": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/$defs/ipv4-cidr"
              }
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cluster_pods_cidrs": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "$ref": "#/$defs/ipv4-cidr"
              }
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "capd": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "docker_host_socket": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/$defs/gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "capo": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "capv": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cluster_external_ip": {
          "anyOf": [
            {
              "type": "string",
              "format": "ipv4"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cluster_public_ip": {
          "anyOf": [
            {
              "type": "string",
              "format": "ipv4"
            },
            {
              "type": "string",
              "maxLength": 0
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "cluster_external_ip_interfaces": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "metallb_helm_oci_url": {
          "anyOf": [
            {
              "type": "string",
              "pattern": "^oci://.*"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "metallb_helm_version": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "dns_resolver": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "enable_longhorn": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "mgmt_cluster_external_ip": {
          "anyOf": [
            {
              "type": "string",
              "format": "ipv4"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "mgmt_cluster_external_domain": {
          "anyOf": [
            {
              "type": "string",
              "format": "hostname"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "ntp": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "patternProperties": {
                "enabled": {
                  "anyOf": [
                    {
                      "type": "boolean"
                    },
                    {
                      "$ref": "#/$defs/gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "servers": {
                  "anyOf": [
                    {
                      "type": "array",
                      "items": {
                        "anyOf": [
                          {
                            "type": "string",
                            "format": "ipv4"
                          },
                          {
                            "type": "string",
                            "format": "hostname"
                          }
                        ]
                      }
                    },
                    {
                      "$ref": "#/$defs/gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "proxies": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "patternProperties": {
                "https?_proxy": {
                  "anyOf": [
                    {
                      "type": "string",
                      "pattern": "^(https?://.*|)$"
                    },
                    {
                      "$ref": "#/$defs/gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "no_proxy": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "$ref": "#/$defs/gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              },
              "required": [
                "http_proxy",
                "https_proxy",
                "no_proxy"
              ]
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "registry_mirrors": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "default_settings": {
                  "anyOf": [
                    {
                      "type": "object"
                    },
                    {
                      "$ref": "#/$defs/gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "hosts_config": {
                  "anyOf": [
                    {
                      "type": "object",
                      "additionalProperties": false,
                      "patternProperties": {
                        "^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {
                          "anyOf": [
                            {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "additionalProperties": false,
                                "properties": {
                                  "registry_settings": {
                                    "type": "object"
                                  },
                                  "mirror_url": {
                                    "type": "string",
                                    "format": "uri",
                                    "pattern": "^(https?://.*|)$"
                                  }
                                }
                              }
                            },
                            {
                              "$ref": "#/$defs/gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      }
                    },
                    {
                      "$ref": "#/$defs/gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "bgp_lbs": {
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "kube_vip": {
                  "anyOf": [
                    {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "bgp_routerid": {
                          "anyOf": [
                            {
                              "type": "string",
                              "format": "ipv4"
                            },
                            {
                              "$ref": "#/$defs/gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "bgp_routerinterface": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "$ref": "#/$defs/gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "bgp_sourceif": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "$ref": "#/$defs/gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "bgp_sourceip": {
                          "anyOf": [
                            {
                              "type": "string",
                              "format": "ipv4"
                            },
                            {
                              "$ref": "#/$defs/gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "bgp_as": {
                          "anyOf": [
                            {
                              "type": "integer"
                            },
                            {
                              "$ref": "#/$defs/gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "bgp_peers": {
                          "anyOf": [
                            {
                              "type": "string"
                            },
                            {
                              "$ref": "#/$defs/gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "vip_cidr": {
                          "anyOf": [
                            {
                              "type": "integer"
                            },
                            {
                              "$ref": "#/$defs/gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      }
                    },
                    {
                      "$ref": "#/$defs/gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "metallb": {
                  "anyOf": [
                    {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "address_pools": {
                          "anyOf": [
                            {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "required": [
                                  "name",
                                  "addresses"
                                ],
                                "properties": {
                                  "name": {
                                    "type": "string"
                                  },
                                  "addresses": {
                                    "type": "array",
                                    "items": {
                                      "anyOf": [
                                        {
                                          "$ref": "#/$defs/ipv4-cidr-full"
                                        },
                                        {
                                          "$ref": "#/$defs/ipv4-range"
                                        }
                                      ]
                                    }
                                  }
                                }
                              }
                            },
                            {
                              "$ref": "#/$defs/gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        },
                        "l3_options": {
                          "anyOf": [
                            {
                              "type": "object",
                              "additionalProperties": false,
                              "properties": {
                                "bgp_peers": {
                                  "anyOf": [
                                    {
                                      "type": "array",
                                      "items": {
                                        "type": "object",
                                        "required": [
                                          "name",
                                          "local_asn",
                                          "peer_asn",
                                          "peer_address"
                                        ],
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          },
                                          "local_asn": {
                                            "type": "integer",
                                            "minimum": 1,
                                            "maximum": 4294967295
                                          },
                                          "peer_asn": {
                                            "type": "integer",
                                            "minimum": 1,
                                            "maximum": 4294967295
                                          },
                                          "peer_address": {
                                            "type": "string",
                                            "format": "ipv4"
                                          },
                                          "advertised_pools": {
                                            "type": "array",
                                            "items": {
                                              "type": "string"
                                            }
                                          }
                                        }
                                      }
                                    },
                                    {
                                      "$ref": "#/$defs/gotpl"
                                    },
                                    {
                                      "type": "null"
                                    }
                                  ]
                                }
                              }
                            },
                            {
                              "$ref": "#/$defs/gotpl"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      }
                    },
                    {
                      "$ref": "#/$defs/gotpl"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "metal3": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "images": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "default": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "control_plane": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "machine_deployments": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "machine_deployment_default": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "baremetal_hosts": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        },
        "baremetal_host_default": {
          "anyOf": [
            {
              "type": "object"
            },
            {
              "$ref": "#/$defs/gotpl"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "allOf": [
        {
          "if": {
            "properties": {
              "capi_providers": {
                "properties": {
                  "infra_provider": {
                    "const": "capo"
                  }
                }
              }
            }
          },
          "then": {
            "required": [
              "capo"
            ],
            "properties": {
              "capo": {
                "anyOf": [
                  {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "flavor_name": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "worker_flavor_name": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "control_plane_az": {
                        "anyOf": [
                          {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "ssh_key_name": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "network_id": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "external_network_id": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "rootVolume": {
                        "anyOf": [
                          {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                              "diskSize": {
                                "anyOf": [
                                  {
                                    "type": "integer"
                                  },
                                  {
                                    "$ref": "#/$defs/gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "volumeType": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "$ref": "#/$defs/gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            }
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "control_plane_servergroup_id": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "worker_servergroup_id": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "control_plane_security_group_name": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "worker_security_group_name": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "clouds_yaml": {
                        "anyOf": [
                          {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                              "clouds": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "additionalProperties": false,
                                    "required": [
                                      "capo_cloud"
                                    ],
                                    "patternProperties": {
                                      "(capo_cloud|.*)": {
                                        "anyOf": [
                                          {
                                            "type": "object",
                                            "additionalProperties": true,
                                            "required": [
                                              "auth"
                                            ],
                                            "properties": {
                                              "auth": {
                                                "anyOf": [
                                                  {
                                                    "type": "object",
                                                    "additionalProperties": true,
                                                    "required": [
                                                      "auth_url",
                                                      "username",
                                                      "password",
                                                      "project_name",
                                                      "project_domain_name",
                                                      "user_domain_name"
                                                    ],
                                                    "properties": {
                                                      "auth_url": {
                                                        "anyOf": [
                                                          {
                                                            "type": "string",
                                                            "format": "uri"
                                                          },
                                                          {
                                                            "$ref": "#/$defs/gotpl"
                                                          },
                                                          {
                                                            "type": "null"
                                                          }
                                                        ]
                                                      },
                                                      "user_domain_name": {
                                                        "anyOf": [
                                                          {
                                                            "type": "string"
                                                          },
                                                          {
                                                            "$ref": "#/$defs/gotpl"
                                                          },
                                                          {
                                                            "type": "null"
                                                          }
                                                        ]
                                                      },
                                                      "project_domain_name": {
                                                        "anyOf": [
                                                          {
                                                            "type": "string"
                                                          },
                                                          {
                                                            "$ref": "#/$defs/gotpl"
                                                          },
                                                          {
                                                            "type": "null"
                                                          }
                                                        ]
                                                      },
                                                      "project_name": {
                                                        "anyOf": [
                                                          {
                                                            "type": "string"
                                                          },
                                                          {
                                                            "$ref": "#/$defs/gotpl"
                                                          },
                                                          {
                                                            "type": "null"
                                                          }
                                                        ]
                                                      },
                                                      "username": {
                                                        "anyOf": [
                                                          {
                                                            "type": "string"
                                                          },
                                                          {
                                                            "$ref": "#/$defs/gotpl"
                                                          },
                                                          {
                                                            "type": "null"
                                                          }
                                                        ]
                                                      },
                                                      "password": {
                                                        "anyOf": [
                                                          {
                                                            "type": "string"
                                                          },
                                                          {
                                                            "$ref": "#/$defs/gotpl"
                                                          },
                                                          {
                                                            "type": "null"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  },
                                                  {
                                                    "$ref": "#/$defs/gotpl"
                                                  },
                                                  {
                                                    "type": "null"
                                                  }
                                                ]
                                              },
                                              "region_name": {
                                                "anyOf": [
                                                  {
                                                    "type": "string"
                                                  },
                                                  {
                                                    "type": "null"
                                                  },
                                                  {
                                                    "$ref": "#/$defs/gotpl"
                                                  },
                                                  {
                                                    "type": "null"
                                                  }
                                                ]
                                              },
                                              "verify": {
                                                "anyOf": [
                                                  {
                                                    "type": "boolean"
                                                  },
                                                  {
                                                    "$ref": "#/$defs/gotpl"
                                                  },
                                                  {
                                                    "type": "null"
                                                  }
                                                ]
                                              }
                                            }
                                          },
                                          {
                                            "$ref": "#/$defs/gotpl"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      }
                                    }
                                  },
                                  {
                                    "$ref": "#/$defs/gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            }
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "cacert": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "resources_tag": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      }
                    }
                  },
                  {
                    "$ref": "#/$defs/gotpl"
                  },
                  {
                    "type": "null"
                  }
                ]
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "capi_providers": {
                "properties": {
                  "infra_provider": {
                    "const": "capv"
                  }
                }
              }
            }
          },
          "then": {
            "properties": {
              "capv": {
                "anyOf": [
                  {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "dataCenter": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "networks": {
                        "anyOf": [
                          {
                            "type": "object",
                            "additionalProperties": true,
                            "patternProperties": {
                              "^[a-z0-9][a-z0-9-]*[a-z0-9]$": {
                                "anyOf": [
                                  {
                                    "type": "object",
                                    "additionalProperties": false,
                                    "properties": {
                                      "dhcp4": {
                                        "anyOf": [
                                          {
                                            "type": "boolean"
                                          },
                                          {
                                            "$ref": "#/$defs/gotpl"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      },
                                      "networkName": {
                                        "anyOf": [
                                          {
                                            "type": "string"
                                          },
                                          {
                                            "$ref": "#/$defs/gotpl"
                                          },
                                          {
                                            "type": "null"
                                          }
                                        ]
                                      }
                                    },
                                    "required": [
                                      "networkName"
                                    ]
                                  },
                                  {
                                    "$ref": "#/$defs/gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            }
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "server": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "dataStore": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "tlsThumbprint": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "username": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "password": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "ssh_key": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "folder": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "resourcePool": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "storagePolicyName": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "template_clone_mode": {
                        "anyOf": [
                          {
                            "type": "string",
                            "enum": [
                              "linkedClone",
                              "fullClone"
                            ]
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "control_plane_profile": {
                        "anyOf": [
                          {
                            "type": "object",
                            "properties": {
                              "diskGiB": {
                                "anyOf": [
                                  {
                                    "type": "integer"
                                  },
                                  {
                                    "$ref": "#/$defs/gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "memoryMiB": {
                                "anyOf": [
                                  {
                                    "type": "integer"
                                  },
                                  {
                                    "$ref": "#/$defs/gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "numCPUs": {
                                "anyOf": [
                                  {
                                    "type": "integer"
                                  },
                                  {
                                    "$ref": "#/$defs/gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            }
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "storageClass": {
                        "anyOf": [
                          {
                            "type": "object",
                            "properties": {
                              "storagePolicyName": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "$ref": "#/$defs/gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "fsType": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "$ref": "#/$defs/gotpl"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            }
                          },
                          {
                            "$ref": "#/$defs/gotpl"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      }
                    }
                  },
                  {
                    "$ref": "#/$defs/gotpl"
                  },
                  {
                    "type": "null"
                  }
                ]
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "dns_resolver": {
                "const": true
              }
            },
            "required": [
              "dns_resolver"
            ]
          },
          "then": {
            "required": [
              "mgmt_cluster_external_ip",
              "mgmt_cluster_external_domain"
            ]
          }
        },
        {
          "if": {
            "properties": {
              "capi_providers": {
                "properties": {
                  "bootstrap_provider": {
                    "const": "cabpr"
                  }
                }
              }
            }
          },
          "then": {
            "required": [
              "cis_profile"
            ]
          }
        }
      ]
    }
  },
  "additionalProperties": false,
  "required": [
    "registry_secret",
    "git_repo_spec_default",
    "source_templates",
    "helm_repo_spec_default",
    "unit_kustomization_spec_default",
    "unit_helmrelease_spec_default",
    "unit_helmrelease_kustomization_spec_default",
    "units_enabled_default",
    "units",
    "cluster",
    "proxies",
    "env_type",
    "registry_mirrors"
  ],
  "properties": {
    "fullnameOverride": {
      "type": "string"
    },
    "nameOverride": {
      "type": "string"
    },
    "registry_secret": {
      "type": "object",
      "patternProperties": {
        "^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {
          "anyOf": [
            {
              "type": "string",
              "pattern": "{{ .* }}"
            },
            {
              "$ref": "#/$defs/username-password"
            }
          ]
        }
      }
    },
    "git_repo_spec_default": {
      "type": "object"
    },
    "oci_repo_spec_default": {
      "type": "object"
    },
    "source_templates": {
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {
          "type": "object",
          "additionalProperties": false,
          "anyOf": [
            {
              "required": [
                "spec",
                "kind"
              ]
            },
            {
              "required": [
                "existing_source"
              ]
            }
          ],
          "properties": {
            "existing_source": {
              "anyOf": [
                {
                  "type": "null"
                },
                {
                  "type": "object",
                  "required": [
                    "name",
                    "kind"
                  ],
                  "additionalProperties": false,
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "kind": {
                      "type": "string",
                      "enum": [
                        "GitRepository",
                        "OCIRepository"
                      ]
                    },
                    "namespace": {
                      "type": "string"
                    }
                  }
                }
              ]
            },
            "auth": {
              "$ref": "#/$defs/username-password"
            },
            "kind": {
              "type": "string",
              "enum": [
                "GitRepository",
                "OCIRepository"
              ]
            },
            "spec": {
              "type": "object",
              "required": [
                "url",
                "ref"
              ],
              "properties": {
                "url": {
                  "anyOf": [
                    {
                      "type": "string",
                      "format": "uri"
                    },
                    {
                      "$ref": "#/$defs/string-with-gotpl"
                    }
                  ]
                }
              },
              "not": {
                "required": [
                  "secretRef"
                ]
              }
            }
          },
          "allOf": [
            {
              "if": {
                "properties": {
                  "kind": {
                    "const": "GitRepository"
                  }
                }
              },
              "then": {
                "properties": {
                  "spec": {
                    "type": "object",
                    "properties": {
                      "ref": {
                        "type": "object",
                        "additionalProperties": false,
                        "anyOf": [
                          {
                            "required": [
                              "branch"
                            ]
                          },
                          {
                            "required": [
                              "tag"
                            ]
                          },
                          {
                            "required": [
                              "commit"
                            ]
                          }
                        ],
                        "patternProperties": {
                          "(branch|tag|commit)": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            {
              "if": {
                "properties": {
                  "kind": {
                    "const": "OCIRepository"
                  }
                }
              },
              "then": {
                "properties": {
                  "spec": {
                    "type": "object",
                    "properties": {
                      "ref": {
                        "type": "object",
                        "additionalProperties": false,
                        "anyOf": [
                          {
                            "required": [
                              "digest"
                            ]
                          },
                          {
                            "required": [
                              "semver"
                            ]
                          },
                          {
                            "required": [
                              "tag"
                            ]
                          }
                        ],
                        "patternProperties": {
                          "(digest|semver|tag)": {
                            "type": "string"
                          },
                          "branch": {
                            "type": "null"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          ]
        }
      }
    },
    "helm_repo_spec_default": {
      "type": "object"
    },
    "unit_kustomization_spec_default": {
      "type": "object"
    },
    "unit_helmrelease_spec_default": {
      "type": "object"
    },
    "unit_helmrelease_kustomization_spec_default": {
      "type": "object"
    },
    "unit_templates": {
      "type": "object",
      "^[a-z0-9][a-z0-9-]*[a-z0-9]$": {
        "type": "object"
      }
    },
    "units": {
      "type": "object",
      "patternProperties": {
        "^[a-z0-9][a-z0-9-]*[a-z0-9]$": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "$ref": "#/$defs/enabled"
            },
            "enabled_conditions": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/enabled"
              }
            },
            "unit_template": {
              "type": "string",
              "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$"
            },
            "repo": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ]
            },
            "labels": {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "type": "string"
                }
              }
            },
            "annotations": {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "type": "string"
                }
              }
            },
            "depends_on": {
              "anyOf": [
                {
                  "type": "object",
                  "patternProperties": {
                    "^([a-z0-9][a-z0-9-]*[a-z0-9](/[a-z0-9][a-z0-9-]*[a-z0-9])?|{{ .* }})$": {
                      "anyOf": [
                        {
                          "type": "boolean"
                        },
                        {
                          "$ref": "#/$defs/gotpl"
                        }
                      ]
                    }
                  }
                },
                {
                  "$ref": "#/$defs/gotpl"
                }
              ]
            },
            "ref_override": {
              "type": "string"
            },
            "kustomization_spec": {
              "type": "object",
              "properties": {
                "path": {
                  "type": "string"
                },
                "_patches": {
                  "type": "array",
                  "items": {
                    "anyOf": [
                      {
                        "type": "object"
                      },
                      {
                        "$ref": "#/$defs/gotpl"
                      }
                    ]
                  }
                },
                "_components": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "allOf": [
                {
                  "not": {
                    "required": [
                      "dependsOn"
                    ]
                  }
                },
                {
                  "not": {
                    "required": [
                      "wait",
                      "healthChecks"
                    ],
                    "properties": {
                      "wait": {
                        "const": true
                      }
                    }
                  }
                },
                {
                  "not": {
                    "required": [
                      "sourceRef"
                    ]
                  }
                }
              ]
            },
            "helmrelease_spec": {
              "type": "object",
              "required": [
                "chart"
              ],
              "properties": {
                "chart": {
                  "type": "object",
                  "required": [
                    "spec"
                  ],
                  "properties": {
                    "spec": {
                      "type": "object",
                      "required": [
                        "chart"
                      ],
                      "properties": {
                        "chart": {
                          "type": "string"
                        }
                      }
                    }
                  }
                },
                "_postRenderers": {
                  "type": "array",
                  "items": {
                    "anyOf": [
                      {
                        "type": "object"
                      },
                      {
                        "$ref": "#/$defs/gotpl"
                      }
                    ]
                  }
                }
              },
              "not": {
                "required": [
                  "dependsOn"
                ]
              }
            },
            "helm_repo_url": {
              "anyOf": [
                {
                  "type": "string",
                  "pattern": "(https?|oci)://.*"
                },
                {
                  "$ref": "#/$defs/gotpl"
                }
              ]
            },
            "helm_chart_artifact_name": {
              "type": "string"
            },
            "helm_secret_values": {
              "type": "object"
            },
            "kustomization_substitute_secrets": {
              "type": "object",
              "additionalProperties": false,
              "patternProperties": {
                "^.*$": {
                  "type": "string"
                }
              }
            }
          },
          "dependentRequired": {
            "kustomization_substitute_secrets": [
              "kustomization_spec"
            ],
            "helm_secret_values": [
              "helmrelease_spec"
            ],
            "helm_repo_url": [
              "helmrelease_spec"
            ],
            "helm_chart_artifact_name": [
              "helmrelease_spec"
            ]
          },
          "allOf": [
            {
              "anyOf": [
                {
                  "required": [
                    "helmrelease_spec"
                  ]
                },
                {
                  "required": [
                    "kustomization_spec"
                  ]
                }
              ]
            },
            {
              "anyOf": [
                {
                  "properties": {
                    "enabled": {
                      "const": false
                    }
                  }
                },
                {
                  "allOf": [
                    {
                      "not": {
                        "required": [
                          "repo",
                          "helm_repo_url"
                        ],
                        "properties": {
                          "repo": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "not": {
                          "required": [
                            "helmrelease_spec"
                          ]
                        }
                      },
                      "then": {
                        "properties": {
                          "kustomization_spec": {
                            "allOf": [
                              {
                                "required": [
                                  "path"
                                ]
                              },
                              {
                                "anyOf": [
                                  {
                                    "required": [
                                      "wait"
                                    ]
                                  },
                                  {
                                    "required": [
                                      "healthChecks"
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "if": {
                        "required": [
                          "helmrelease_spec"
                        ]
                      },
                      "then": {
                        "anyOf": [
                          {
                            "not": {
                              "required": [
                                "kustomization_spec"
                              ]
                            }
                          },
                          {
                            "not": {
                              "properties": {
                                "kustomization_spec": {
                                  "required": [
                                    "path"
                                  ]
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              ]
            }
          ]
        },
        "^cluster$": {
          "type": "object",
          "additionalProperties": true,
          "properties": {
            "helmrelease_spec": {
              "type": "object",
              "properties": {
                "values": {
                  "$ref": "#/$defs/sylva-capi-cluster-values"
                }
              }
            }
          }
        }
      }
    },
    "cluster": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "capi_providers",
        "image"
      ],
      "properties": {
        "name": {
          "type": "string"
        },
        "admin_password": {
          "type": "string"
        },
        "image": {
          "type": "string"
        },
        "worker_machine_image": {
          "type": "string"
        },
        "cis_profile": {
          "anyOf": [
            {
              "type": "string",
              "enum": [
                "",
                "cis-1.6",
                "cis-1.23"
              ]
            }
          ]
        },
        "air_gapped": {
          "type": "boolean"
        },
        "capi_providers": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "infra_provider": {
              "enum": [
                "capd",
                "capo",
                "capv",
                "capm3"
              ]
            },
            "bootstrap_provider": {
              "enum": [
                "cabpk",
                "cabpr"
              ]
            }
          }
        },
        "cluster_external_ip": {
          "type": "string",
          "format": "ipv4"
        },
        "display_external_ip": {
          "type": "string"
        },
        "cluster_external_domain": {
          "type": "string",
          "format": "hostname"
        },
        "control_plane_replicas": {
          "type": "integer"
        },
        "k8s_version": {
          "type": "string"
        },
        "cis_benchmark_scan_profile": {
          "type": "string"
        },
        "flux_webui": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "admin_user": {
              "type": "string"
            }
          }
        },
        "rancher": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "external_hostname": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "hostname"
                },
                {
                  "$ref": "#/$defs/string-with-gotpl"
                }
              ]
            }
          }
        },
        "vault": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "external_hostname": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "hostname"
                },
                {
                  "$ref": "#/$defs/string-with-gotpl"
                }
              ]
            }
          }
        },
        "keycloak": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "external_hostname": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "hostname"
                },
                {
                  "$ref": "#/$defs/string-with-gotpl"
                }
              ]
            }
          }
        },
        "flux": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "external_hostname": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "hostname"
                },
                {
                  "$ref": "#/$defs/string-with-gotpl"
                }
              ]
            }
          }
        },
        "os_image_server": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "external_hostname": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "hostname"
                },
                {
                  "const": ""
                },
                {
                  "$ref": "#/$defs/string-with-gotpl"
                }
              ]
            }
          }
        },
        "os_images": {
          "type": "object"
        },
        "capd": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "docker_host": {
              "type": "string",
              "format": "uri",
              "pattern": "^(unix|tcp)://.*"
            }
          }
        },
        "capo": {
          "type": "object"
        },
        "capv": {
          "type": "object"
        },
        "capm3": {
          "type": "object"
        },
        "metallb_additional_options": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "address_pools": {
              "type": "array",
              "items": {
                "type": "object",
                "required": [
                  "name",
                  "addresses"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "addresses": {
                    "type": "array",
                    "items": {
                      "anyOf": [
                        {
                          "$ref": "#/$defs/ipv4-cidr-full"
                        },
                        {
                          "$ref": "#/$defs/ipv4-range"
                        }
                      ]
                    }
                  }
                }
              }
            },
            "l3_options": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "bgp_peers": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "name",
                      "local_asn",
                      "peer_asn",
                      "peer_address"
                    ],
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "local_asn": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 4294967295
                      },
                      "peer_asn": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 4294967295
                      },
                      "peer_address": {
                        "type": "string",
                        "format": "ipv4"
                      },
                      "advertised_pools": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "test_workload_cluster_name": {
          "type": "string",
          "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$"
        },
        "sriov": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "node_policies": {
              "type": "object",
              "additionalProperties": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "resourceName",
                  "numVfs",
                  "nicSelector"
                ],
                "properties": {
                  "nodeSelector": {
                    "type": "object"
                  },
                  "resourceName": {
                    "type": "string",
                    "pattern": "^[a-z0-9][a-z0-9_.]*[a-z0-9]$"
                  },
                  "numVfs": {
                    "type": "integer"
                  },
                  "nicSelector": {
                    "type": "object",
                    "additionalProperties": false,
                    "minProperties": 1,
                    "properties": {
                      "deviceID": {
                        "type": "string"
                      },
                      "vendor": {
                        "type": "string",
                        "pattern": "^[0-9a-f]{4}$"
                      },
                      "pfNames": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "rootDevices": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "allOf": [
        {
          "if": {
            "properties": {
              "capi_providers": {
                "properties": {
                  "infra_provider": {
                    "const": "capo"
                  }
                }
              }
            }
          },
          "then": {
            "properties": {
              "capo": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "flavor_name": {
                    "type": "string"
                  },
                  "worker_flavor_name": {
                    "type": "string"
                  },
                  "control_plane_az": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "worker_az": {
                    "type": "string"
                  },
                  "ssh_key_name": {
                    "type": "string"
                  },
                  "floating_ip": {
                    "anyOf": [
                      {
                        "type": "string",
                        "format": "ipv4"
                      },
                      {
                        "type": "string",
                        "maxLength": 0
                      }
                    ]
                  },
                  "network_id": {
                    "type": "string"
                  },
                  "external_network_id": {
                    "type": "string"
                  },
                  "control_plane_servergroup_id": {
                    "type": "string"
                  },
                  "control_plane_affinity_policy": {
                    "type": "string",
                    "enum": [
                      "anti-affinity",
                      "soft-anti-affinity"
                    ]
                  },
                  "worker_servergroup_id": {
                    "type": "string"
                  },
                  "worker_affinity_policy": {
                    "type": "string",
                    "enum": [
                      "anti-affinity",
                      "soft-anti-affinity"
                    ]
                  },
                  "additional_networks": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "virtio_network_id": {
                        "type": "string"
                      },
                      "direct_network_id": {
                        "type": "string"
                      }
                    }
                  },
                  "rootVolume": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "diskSize": {
                        "type": "integer"
                      },
                      "volumeType": {
                        "type": "string"
                      }
                    }
                  },
                  "clouds_yaml": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "clouds": {
                        "type": "object",
                        "additionalProperties": false,
                        "required": [
                          "capo_cloud"
                        ],
                        "patternProperties": {
                          "(capo_cloud|.*)": {
                            "type": "object",
                            "additionalProperties": true,
                            "required": [
                              "auth",
                              "region_name"
                            ],
                            "properties": {
                              "auth": {
                                "type": "object",
                                "additionalProperties": true,
                                "required": [
                                  "auth_url",
                                  "username",
                                  "password",
                                  "project_name",
                                  "project_domain_name",
                                  "user_domain_name"
                                ],
                                "properties": {
                                  "auth_url": {
                                    "type": "string",
                                    "format": "uri"
                                  },
                                  "user_domain_name": {
                                    "type": "string"
                                  },
                                  "project_domain_name": {
                                    "type": "string"
                                  },
                                  "project_name": {
                                    "type": "string"
                                  },
                                  "username": {
                                    "type": "string"
                                  },
                                  "password": {
                                    "type": "string"
                                  }
                                }
                              },
                              "region_name": {
                                "type": "string"
                              },
                              "verify": {
                                "type": "boolean"
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  "cacert": {
                    "type": "string"
                  },
                  "storageClass": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "type": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "type"
                    ]
                  },
                  "resources_tag": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "capi_providers": {
                "properties": {
                  "infra_provider": {
                    "const": "capv"
                  }
                }
              }
            }
          },
          "then": {
            "properties": {
              "capv": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "dataCenter": {
                    "type": "string"
                  },
                  "network": {
                    "type": "string"
                  },
                  "server": {
                    "type": "string"
                  },
                  "dataStore": {
                    "type": "string"
                  },
                  "tlsThumbprint": {
                    "type": "string"
                  },
                  "username": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  },
                  "ssh_key": {
                    "type": "string"
                  },
                  "folder": {
                    "type": "string"
                  },
                  "resourcePool": {
                    "type": "string"
                  },
                  "storagePolicyName": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        {
          "if": {
            "properties": {
              "capi_providers": {
                "properties": {
                  "infra_provider": {
                    "const": "capm3"
                  }
                }
              }
            }
          },
          "then": {
            "properties": {
              "capm3": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "bootstrap_ip": {
                    "type": "string",
                    "format": "ipv4"
                  },
                  "external_bootstrap_ip": {
                    "type": "string",
                    "format": "ipv4"
                  }
                }
              }
            }
          }
        }
      ]
    },
    "proxies": {
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "https?_proxy": {
          "type": "string",
          "pattern": "^(https?://.*|)$"
        },
        "no_proxy": {
          "type": "string"
        }
      },
      "required": [
        "http_proxy",
        "https_proxy",
        "no_proxy"
      ]
    },
    "no_proxy_additional": {
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        ".*": {
          "type": "boolean"
        }
      }
    },
    "sylva_base_oci_registry": {
      "anyOf": [
        {
          "type": "string",
          "format": "uri",
          "pattern": "^oci://.*$"
        },
        {
          "$ref": "#/$defs/string-with-gotpl"
        }
      ]
    },
    "sylva_core_oci_registry": {
      "anyOf": [
        {
          "type": "string",
          "format": "uri",
          "pattern": "^oci://.*$"
        },
        {
          "$ref": "#/$defs/string-with-gotpl"
        }
      ]
    },
    "metallb_helm_oci_url": {
      "anyOf": [
        {
          "type": "string",
          "pattern": "^oci://.*"
        },
        {
          "$ref": "#/$defs/string-with-gotpl"
        },
        {
          "const": null
        }
      ]
    },
    "registry_mirrors": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "default_settings": {
          "type": "object"
        },
        "hosts_config": {
          "type": "object",
          "additionalProperties": false,
          "patternProperties": {
            "^[a-z0-9][a-z0-9.-]*[a-z0-9]$": {
              "type": "array",
              "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "registry_settings": {
                    "type": "object"
                  },
                  "mirror_url": {
                    "type": "string",
                    "format": "uri",
                    "pattern": "^(https?://.*|)$"
                  }
                }
              }
            }
          }
        }
      }
    },
    "units_enabled_default": {
      "type": "boolean"
    },
    "units_override_enabled": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "env_type": {
      "type": "string",
      "pattern": "^(dev|ci|prod)$"
    },
    "ntp": {
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "enabled": {
          "type": "boolean"
        },
        "servers": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string",
                "format": "ipv4"
              },
              {
                "type": "string",
                "format": "hostname"
              }
            ]
          }
        }
      }
    },
    "_internal": {
      "type": "object"
    }
  }
}