---
image: registry.gitlab.com/t6306/components/docker-images/ci-image:v1-0-0

.helm-lint:
  script:
    - helm lint charts/${HELM_NAME}

.helm-yamllint:
  script:
    - yamllint charts/${HELM_NAME} -d "$(cat < tools/gci-templates/yamllint.yaml) $(cat < tools/gci-templates/yamllint-helm-exclude-chart-templates.yaml)"

.helm-template-yamllint:
  script:
    - helm dependency build charts/${HELM_NAME}
    - helm template ${HELM_NAME} charts/${HELM_NAME} --set test_all_components_enabled=true | yamllint - -d "$(cat < tools/gci-templates/yamllint.yaml) $(cat < tools/gci-templates/yamllint-helm-template-rules)"
