# You can override the included template(s) by including variable overrides
# SAST customization: https://docs.gitlab.com/ee/user/application_security/sast/#customizing-the-sast-settings
# Secret Detection customization: https://docs.gitlab.com/ee/user/application_security/secret_detection/#customizing-settings
# Dependency Scanning customization: https://docs.gitlab.com/ee/user/application_security/dependency_scanning/#customizing-the-dependency-scanning-settings
# Container Scanning customization: https://docs.gitlab.com/ee/user/application_security/container_scanning/#customizing-the-container-scanning-settings
# Note that environment variables can be set in several places
# See https://docs.gitlab.com/ee/ci/variables/#cicd-variable-precedence
include:
- project: to-be-continuous/gitleaks
  ref: 2.2.3
  file: templates/gitlab-ci-gitleaks.yml
  rules:
  - if: $CI_PIPELINE_SOURCE == "pipeline"
    when: never
- project: renovate-bot/renovate-runner
  ref: v16.22.6
  file: "/templates/renovate-config-validator.gitlab-ci.yml"
  rules:
  - if: "$CI_PIPELINE_SOURCE == 'merge_request_event'"
    changes:
      paths:
      - ".gitlab-ci.yml"
      - renovate.json
- project: sylva-projects/sylva-elements/renovate
  ref: 1.0.0
  file: "/templates/renovate-dry-run.gitlab-ci.yml"
  rules:
  - if: "$CI_PIPELINE_SOURCE == 'merge_request_event'"
    changes:
      paths:
      - renovate.json
- local: ".gitlab/ci/common.yml"
- local: ".gitlab/ci/main-pipeline-workflow-and-globals.yml"
- local: ".gitlab/ci/main-pipeline-checks.yml"
- local: ".gitlab/ci/main-pipeline-builds.yml"
- local: ".gitlab/ci/main-pipeline-deployment-tests.yml"
- local: ".gitlab/ci/main-pipeline-cleanup.yml"
- template: Security/Dependency-Scanning.gitlab-ci.yml
variables:
  GITLEAKS_ARGS: "--verbose --log-opts=$CI_COMMIT_SHA"
