cluster:
  capi_providers:
    infra_provider: capm3
    bootstrap_provider: cabpr
  control_plane_replicas: 1
  cluster_external_ip: 192.168.130.30
  capm3:
    bootstrap_ip: # replaced inside .gitlab-ci.yml logic

units:
  cluster:
    helmrelease_spec:
      values:
        cis_profile: ""
        control_plane_replicas: 1
        cluster_external_ip: "{{ .Values.cluster.cluster_external_ip }}"
        metal3:
          machine_image_url: http://192.168.133.1/ubuntu-22.04-plain.qcow2
          machine_image_format: qcow2
          machine_image_checksum: http://192.168.133.1/ubuntu-22.04-plain.qcow2.md5sum
          machine_image_checksum_type: md5
          worker_machine_image_url: http://192.168.133.1/ubuntu-22.04-plain.qcow2
          worker_machine_image_format: qcow2
          worker_machine_image_checksum: http://192.168.133.1/ubuntu-22.04-plain.qcow2.md5sum
          worker_machine_image_checksum_type: md5
          public_pool_name: "public-pool"
          public_pool_network: 192.168.130.0
          public_pool_gateway: 192.168.130.1
          public_pool_start: 192.168.130.100
          public_pool_end: 192.168.130.120
          public_pool_prefix: "24"
          provisioning_pool_name: "provisioning-pool"
          provisioning_pool_network: 192.168.133.0
          provisioning_pool_gateway: 192.168.133.1
          provisioning_pool_start: 192.168.133.100
          provisioning_pool_end: 192.168.133.120
          provisioning_pool_prefix: "24"
          dns_server: 192.168.130.1
        baremetal_host_default: null
        baremetal_hosts:
          server1:
            credentials:
              username: root
              password: "SylvaCIpass"
            bmh_metadata:
              labels:
                cluster-role: control-plane
            bmh_spec:
              description: Mgmt Ctrl Plane
              online: true
              externallyProvisioned: false
              bmc:
                address: redfish-virtualmedia://192.168.133.1:5000/redfish/v1/Systems/bmh-1
                disableCertificateVerification: true
              automatedCleaningMode: metadata
              bootMACAddress: 52:54:00:01:00:01
              bootMode: legacy
              rootDeviceHints:
                deviceName: /dev/vda
        machine_deployments: null
        machine_deployment_default: null
        control_plane:
          kubelet_extra_args:
            anonymous-auth: "true"
          infra:
            provisioning_pool_interface: ens3
            public_pool_interface: ens4
            network_interfaces:
              ens3:
                type: phy
              ens4:
                type: phy
          rke2:
            additionalUserData:
              users:
                - name: ubuntu
                  groups: users
                  sudo: ALL=(ALL) NOPASSWD:ALL
                  shell: /bin/bash
                  lock_passwd: false
                  passwd: $6$gwLxr/rEczCWRnTM$S/6h7fR.Mqu3DeTqiRAtk/eHHCauTykzkHnuuwNxJhpTAYfnXtiO9QNXUR4.KsVaEdhdJzeBRIZViAHFv91.v1
                  ssh_authorized_keys:
                    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDIWcqr43OUuKr5dyM4HVmi17IZlp2+BirZit4fgUORcPwhkftnqFuWexQMmpCRar7B1ZOAOcNuqX4CGiIhQUuVPnAhmXTGshUGOB/i6YcCnW6o4DggKVBCs+24SNS93krdUXeB++G3fmERBdElRYcZHFsRQIIMAV4cy7wx2uWFOIyY+mgjfPc9cMQctQCHdwE46SO1PKgKbxOqsPtQDQV/WD10XBn3Wch6uIJysxjmOl3tGTrRSivf9EewEaUj+Lvp6PMdntzh79r72LEBS2HPBQ/sS0bNdy6BNcyA/DZnM39PkOltTgq0ncbJnfTsevPQBmOeBhXqaeYKmBZTfhSTQcC/thMMEozec9UhGsW54pLYSKLoAiG0lAqtPPG06zKdOfbztItoe3FlAN1W5TXIZEDzm5TTWHCaWJcjjdzM6pPNaqdGo0ENNo+2I84aMpT+Xe7hTBRueK4ZCvNC1+16WSvHjojosDC0jO6tKAyzd11AKkbOs05gZo8jSXRXdc0= root@allinone
  metal3:
    enabled: true
    helmrelease_spec:
      postRenderers:
        - kustomize:
            patches:
              - target:
                  kind: ConfigMap
                  name: ironic-bmo-configmap
                patch: |
                  kind: _unused_
                  metadata:
                    name: _unused_
                  data:
                    IRONIC_KERNEL_PARAMS: console=ttyS0 rootpwd="$$$$1$$$$DAhhpomu$$$$YqNcZc3ce5H7uswK4skCZ." # "secret"
  #       values:
  #         services:
  #           ironic:
  #            # Specify the IP address used by Ironic service as it's being known to IPA
  #             ironicIP: '{{ .Values.cluster.cluster_external_ip }}'
  workload-cluster:
    enabled: true
    helmrelease_spec:
      values:
        cluster:
          control_plane_replicas: 1
          cluster_external_ip: 192.168.130.31
          capi_providers:
            infra_provider: capm3
            bootstrap_provider: cabpr
          capm3:
            bootstrap_ip: 192.168.130.30
        units:
          cluster:
            helmrelease_spec:
              values:
                cis_profile: ""
                control_plane_replicas: 1
                worker_replicas: 1
                metal3:
                  machine_image_url: http://192.168.133.1/ubuntu-22.04-plain.qcow2
                  machine_image_format: qcow2
                  machine_image_checksum: http://192.168.133.1/ubuntu-22.04-plain.qcow2.md5sum
                  machine_image_checksum_type: md5
                  worker_machine_image_url: http://192.168.133.1/ubuntu-22.04-plain.qcow2
                  worker_machine_image_format: qcow2
                  worker_machine_image_checksum: http://192.168.133.1/ubuntu-22.04-plain.qcow2.md5sum
                  worker_machine_image_checksum_type: md5
                  public_pool_name: "public-pool"
                  public_pool_network: 192.168.130.0
                  public_pool_gateway: 192.168.130.1
                  public_pool_start: 192.168.130.130
                  public_pool_end: 192.168.130.140
                  public_pool_prefix: "24"
                  provisioning_pool_name: "provisioning-pool"
                  provisioning_pool_network: 192.168.133.0
                  provisioning_pool_gateway: 192.168.133.1
                  provisioning_pool_start: 192.168.133.130
                  provisioning_pool_end: 192.168.133.140
                  provisioning_pool_prefix: "24"
                  dns_server: 192.168.130.1
                baremetal_host_default: null
                baremetal_hosts:
                  server2:
                    credentials:
                      username: root
                      password: "SylvaCIpass"
                    bmh_metadata:
                      labels:
                        cluster-role: control-plane
                    bmh_spec:
                      description: Workload Ctrl Plane
                      online: true
                      externallyProvisioned: false
                      bmc:
                        address: redfish-virtualmedia://192.168.133.1:5000/redfish/v1/Systems/bmh-2
                        disableCertificateVerification: true
                      automatedCleaningMode: metadata
                      bootMACAddress: 52:54:00:01:00:02
                      bootMode: legacy
                      rootDeviceHints:
                        deviceName: /dev/vda
                  server3:
                    credentials:
                      username: root
                      password: "SylvaCIpass"
                    bmh_metadata:
                      labels:
                        cluster-role: worker
                    bmh_spec:
                      description: Workload worker
                      online: true
                      externallyProvisioned: false
                      bmc:
                        address: redfish-virtualmedia://192.168.133.1:5000/redfish/v1/Systems/bmh-3
                        disableCertificateVerification: true
                      automatedCleaningMode: metadata
                      bootMACAddress: 52:54:00:01:00:03
                      bootMode: legacy
                      rootDeviceHints:
                        deviceName: /dev/vda
                control_plane:
                  kubelet_extra_args:
                    anonymous-auth: "true"
                  infra:
                    provisioning_pool_interface: ens3
                    public_pool_interface: ens4
                    network_interfaces:
                      ens3:
                        type: phy
                      ens4:
                        type: phy
                  rke2:
                    additionalUserData:
                      users:
                        - name: ubuntu
                          groups: users
                          sudo: ALL=(ALL) NOPASSWD:ALL
                          shell: /bin/bash
                          lock_passwd: false
                          passwd: $6$gwLxr/rEczCWRnTM$S/6h7fR.Mqu3DeTqiRAtk/eHHCauTykzkHnuuwNxJhpTAYfnXtiO9QNXUR4.KsVaEdhdJzeBRIZViAHFv91.v1
                          ssh_authorized_keys:
                            - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDIWcqr43OUuKr5dyM4HVmi17IZlp2+BirZit4fgUORcPwhkftnqFuWexQMmpCRar7B1ZOAOcNuqX4CGiIhQUuVPnAhmXTGshUGOB/i6YcCnW6o4DggKVBCs+24SNS93krdUXeB++G3fmERBdElRYcZHFsRQIIMAV4cy7wx2uWFOIyY+mgjfPc9cMQctQCHdwE46SO1PKgKbxOqsPtQDQV/WD10XBn3Wch6uIJysxjmOl3tGTrRSivf9EewEaUj+Lvp6PMdntzh79r72LEBS2HPBQ/sS0bNdy6BNcyA/DZnM39PkOltTgq0ncbJnfTsevPQBmOeBhXqaeYKmBZTfhSTQcC/thMMEozec9UhGsW54pLYSKLoAiG0lAqtPPG06zKdOfbztItoe3FlAN1W5TXIZEDzm5TTWHCaWJcjjdzM6pPNaqdGo0ENNo+2I84aMpT+Xe7hTBRueK4ZCvNC1+16WSvHjojosDC0jO6tKAyzd11AKkbOs05gZo8jSXRXdc0= root@allinone
                machine_deployments:
                  md0:
                    metadata:
                      labels:
                        node-role.kubernetes.io/worker: ""
                    infra_provider: capm3
                    replicas: 1
                    provisioning_pool_interface: ens3
                    public_pool_interface: ens4
                    capm3:
                      hostSelector:
                        matchLabels:
                          cluster-role: worker
                      failure_domain: region0
                    network_interfaces:
                      ens3:
                        type: phy
                      ens4:
                        type: phy
                    kubelet_extra_args:
                      anonymous-auth: "true"
                    rke2:
                      additionalUserData:
                        users:
                          - name: ubuntu
                            groups: users
                            sudo: ALL=(ALL) NOPASSWD:ALL
                            shell: /bin/bash
                            lock_passwd: false
                            passwd: $6$gwLxr/rEczCWRnTM$S/6h7fR.Mqu3DeTqiRAtk/eHHCauTykzkHnuuwNxJhpTAYfnXtiO9QNXUR4.KsVaEdhdJzeBRIZViAHFv91.v1
                            ssh_authorized_keys:
                              - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDIWcqr43OUuKr5dyM4HVmi17IZlp2+BirZit4fgUORcPwhkftnqFuWexQMmpCRar7B1ZOAOcNuqX4CGiIhQUuVPnAhmXTGshUGOB/i6YcCnW6o4DggKVBCs+24SNS93krdUXeB++G3fmERBdElRYcZHFsRQIIMAV4cy7wx2uWFOIyY+mgjfPc9cMQctQCHdwE46SO1PKgKbxOqsPtQDQV/WD10XBn3Wch6uIJysxjmOl3tGTrRSivf9EewEaUj+Lvp6PMdntzh79r72LEBS2HPBQ/sS0bNdy6BNcyA/DZnM39PkOltTgq0ncbJnfTsevPQBmOeBhXqaeYKmBZTfhSTQcC/thMMEozec9UhGsW54pLYSKLoAiG0lAqtPPG06zKdOfbztItoe3FlAN1W5TXIZEDzm5TTWHCaWJcjjdzM6pPNaqdGo0ENNo+2I84aMpT+Xe7hTBRueK4ZCvNC1+16WSvHjojosDC0jO6tKAyzd11AKkbOs05gZo8jSXRXdc0= root@allinone
