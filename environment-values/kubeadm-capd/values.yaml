---

units:
  # Disabling some units for lightweight deployment testing
  monitoring:
    enabled: false
  keycloak:
    enabled: false
  flux-webui:
    enabled: false
  capi-rancher-import:
    enabled: false
  kyverno:
    enabled: false
  shared-workload-clusters-settings:
    enabled: false

  # workaround until we move to > 1.26.6
  calico:
    helmrelease_spec:
      values:
        felixConfiguration:
          failsafeInboundHostPorts: "[ {'protocol': 'TCP', 'port': 22}, {'protocol': 'UDP', 'port': 68}, {'protocol': 'TCP', 'port': 179}, {'protocol': 'TCP', 'port': 2379}, {'protocol': 'TCP', 'port': 2380}, {'protocol': 'TCP', 'port': 5473}, {'protocol': 'TCP', 'port': 6443}, {'protocol': 'TCP', 'port': 6666}, {'protocol': 'TCP', 'port': 6667} ]"
          failsafeOutboundHostPorts: "[ {'protocol': 'UDP', 'port': 53}, {'protocol': 'UDP', 'port': 67}, {'protocol': 'TCP', 'port': 179}, {'protocol': 'TCP', 'port': 2379}, {'protocol': 'TCP', 'port': 2380}, {'protocol': 'TCP', 'port': 5473}, {'protocol': 'TCP', 'port': 6443}, {'protocol': 'TCP', 'port': 6666}, {'protocol': 'TCP', 'port': 6667} ]"
          iptablesBackend: "Auto"
          iptablesRefreshInterval: "10s"

cluster:
  k8s_version: v1.26.6
  capi_providers:
    infra_provider: capd
    bootstrap_provider: cabpk

  control_plane_replicas: 1

capd_docker_host: unix:///var/run/docker.sock  # dynamically replaced in CI

cluster_external_ip: # use the .100 (or any other that wouldn't be assigned by Docker) IP from the local kind subnet, returned by: docker network inspect -f '{{json .}}' kind | jq -r .IPAM.Config[0].Subnet

proxies:
  # put your own proxy settings here if you need
  http_proxy: ""
  https_proxy: ""
  no_proxy: ""

# configure containerd registry mirrors following https://github.com/containerd/containerd/blob/main/docs/hosts.md
# see charts/syla-units/values.yaml for a more detailled example
# registry_mirrors:
#   hosts_config:
#     docker.io:
#     - mirror_url: http://your.mirror/docker
