apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

resources:
- oci-repository.yaml

patches:
- target:
    kind: HelmRelease
    name: sylva-units
  patch: |
    kind: HelmRelease
    metadata:
      name: _unused_
    spec:
      values:
        source_templates:
          sylva-core:
            existing_source:
              name: sylva-core
              kind: OCIRepository
# In the future, when we'll have the ability to fetch Helm charts
# from OCIRegistries, we'll be able to remove the GitRepository here
# - target:
#     kind: GitRepository
#     name: sylva-core
#   patch: |
#     kind: GitRepository
#     metadata:
#       name: _unused_
#     $patch: delete
