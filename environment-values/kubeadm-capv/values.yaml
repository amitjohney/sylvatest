---

units:
  capm3:
    enabled: yes

  cabpr:  # RKE2
    enabled: yes

  metal3:
    enabled: yes

  cluster:
    kustomization_spec:
    helmrelease_spec:
      chart:
        spec:
          chart: charts/cluster-vsphere
      interval: 10m0s
      releaseName: management-cluster
      targetNamespace: default
      valuesFrom:
        - kind: Secret
          name: management-cluster-secrets
          valuesKey: values
    helm_secret_values:
      vsphere:
        username: '{{ .Values.cluster.capv.username }}'
        password: '{{ .Values.cluster.capv.password }}'
        datacenter: '{{ .Values.cluster.capv.dataCenter }}'
        network: '{{ .Values.cluster.capv.network }}'
        server: '{{ .Values.cluster.capv.server }}'
        tlsThumbprint: '{{ .Values.cluster.capv.tlsThumbprint }}'

cluster:
  name: management-cluster

  # image reference depends provider
  image: "ubuntu-2004-kube-v1.22.8"

  # for now, the choice below needs to be made
  # consistently with the choice of a matching kustomization path
  # for the 'cluster' unit
  # e.g. you can use ./management-cluster-def/rke2-capd
  capi_providers:
    infra_provider: capv   # capv
    bootstrap_provider: cabpk  # RKE2 or kubeadm

  capv:
    # -- Datacenter to use
    dataCenter: # replace me
    # -- VSphere network for VMs and CSI
    network: # replace me
    # -- VSphere server dns name
    server: # replace me
    # -- VSphere https TLS thumbprint
    tlsThumbprint: # replace me

  cluster_external_ip: # replace me

  metal3:
    # -- cluster_external_ip may be reused to expose ironic too
    ironic_ip: # replace me

proxies:
  http_proxy: # replace me
  https_proxy: # replace me
  no_proxy: # replace me
